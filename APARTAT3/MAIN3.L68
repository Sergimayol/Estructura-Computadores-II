00001BC0 Starting Address
Assembler used: EASy68K Editor/Assembler v5.16.01
Created On: 11/01/2022 12:02:49

00000000                             1  ; =============================================================================
00000000                             2  ; TITLE    : GAME OF LIFE APPLICATION
00000000                             3  ; AUTHOR   : ANTONI BURGUERA
00000000                             4  ; CREATION : 05-JULY-2021
00000000                             5  ; =============================================================================
00000000                             6  
00001000                             7              ORG     $1000
00001000                             8  
00001000                             9  ; --- CODE INCLUDES -----------------------------------------------------------
00001000                            10  
00001000                            11              INCLUDE "SYSCONST.X68"          ; SYSTEM CONSTANTS
00001000                            12  ; =============================================================================
00001000                            13  ; TITLE    : SYSTEM CONSTANTS
00001000                            14  ; AUTHOR   : ANTONI BURGUERA
00001000                            15  ; HISTORY  : 05-JULY-2021 - CREATION
00001000                            16  ; COMMENTS : * MOUVAL AND MOUEDGE FORMAT IS AS FOLLOWS:
00001000                            17  ;              +---+---+---+---+---+---+---+---+
00001000                            18  ;              | 7 | 6 | 5 | 4 | 3 | 2 | 1 | 0 |
00001000                            19  ;              +---+---+---+---+---+---+---+---+
00001000                            20  ;              \-------------------/ |   |   |
00001000                            21  ;                        |           |   |   +-- LEFT MOUSE BUTTON
00001000                            22  ;                        |           |   +------ RIGHT MOUSE BUTTON
00001000                            23  ;                        |           +---------- CENTRAL MOUSE BUTTON
00001000                            24  ;                        +---------------------- 0
00001000                            25  ;              A "1" IN ONE OF THESE BITS IN MOUVAL MEANS "BUTTON PRESSED".
00001000                            26  ;              A "0" IN ONE OF THESE BITS IN MOUVAL MEANS "BUTTON NOT PRESSED".
00001000                            27  ;              A "1" IN ONE OF THESE BITS IN MOUEDGE MEANS "BUTTON CLICKED".
00001000                            28  ;              A "0" IN ONE OF THESE BITS IN MOUEDGE MEANS "BUTTON NOT CLICKED".
00001000                            29  ;              A "CLICK" IS A CHANGE FROM 0 TO 1 IN SUBSEQUENT UPDATES.
00001000                            30  ;              BOTH MOUVEL AND MOUEDGE ARE UPDATED BY TRAP #MOUTRAP
00001000                            31  ;
00001000                            32  ;            * MASKS AND BIT POSITIONS ARE DEFINED TO EASE MOUSE ACCESS. FOR
00001000                            33  ;              EXAMPLE, ONE CAN DO THE FOLLOWING TO CHECK IF THE LEFT BUTTON
00001000                            34  ;              IS PRESSED:
00001000                            35  ;
00001000                            36  ;              BTST.L #MOUBITLF,(MOUVAL)
00001000                            37  ;              BNE ...
00001000                            38  ;
00001000                            39  ;              ALTERNATIVELY, ONE CAN ALSO DO THE FOLLOWING DEPENDING ON THE
00001000                            40  ;              CONTEXT:
00001000                            41  ;
00001000                            42  ;              MOVE.B  (MOUVAL),D0
00001000                            43  ;              AND.B   #MOUMSKLF,D0
00001000                            44  ;              BNE ...
00001000                            45  ; =============================================================================
00001000                            46  
00001000                            47  ; --- SCREEN RELATED CONSTANTS ------------------------------------------------
00001000                            48  
00001000  =00000000                 49  SCRTRAP     EQU     0                       ; SCREEN REFRESH TRAP NUMBER
00001000  =00000320                 50  SCRWIDTH    EQU     800                     ; SCREEN WIDTH (PIXELS)
00001000  =00000258                 51  SCRHEIGH    EQU     600                     ; SCREEN HEIGHT (PIXELS)
00001000                            52  
00001000                            53  ; --- MOUSE RELATED CONSTANTS -------------------------------------------------
00001000                            54  
00001000  =00000001                 55  MOUTRAP     EQU     1                       ; MOUSE QUERY TRAP NUMBER
00001000  =00000001                 56  MOUMSKLF    EQU     %00000001               ; LEFT MOUSE BUTTON MASK
00001000  =00000002                 57  MOUMSKRT    EQU     %00000010               ; RIGHT MOUSE BUTTON MASK
00001000  =00000004                 58  MOUMSKMD    EQU     %00000100               ; MIDDLE MOUSE BUTTON MASL
00001000  =00000000                 59  MOUBITLF    EQU     0                       ; LEFT MOUSE BUTTON BIT POSITION
00001000  =00000001                 60  MOUBITRT    EQU     1                       ; RIGHT MOUSE BUTTON BIT POSITION
00001000  =00000002                 61  MOUBITMD    EQU     2                       ; MIDDLE MOUSE BUTTON BIT POSITION
00001000  =00000002                 62  -------------------- end include --------------------
00001000                            63              INCLUDE "SYSTEM.X68"            ; SYSTEM CODE
00001000                            64  ; =============================================================================
00001000                            65  ; TITLE    : SYSTEM MANAGEMENT (SYSTEM CODE)
00001000                            66  ; AUTHOR   : ANTONI BURGUERA
00001000                            67  ; HISTORY  : 05-JULY-2021 - CREATION
00001000                            68  ; COMMENTS : IT IS DIVIDED IN THREE BLOCKS:
00001000                            69  ;            - SYS : GENERIC.
00001000                            70  ;            - SCR : SCREEN MANAGEMENT.
00001000                            71  ;            - MOU : MOUSE MANAGEMENT
00001000                            72  ;            THE FORMAT OF MOUVAL AND MOUEDGE IS DESCRIBED IN SYSCONST.
00001000                            73  ; =============================================================================
00001000                            74  
00001000                            75  ; -----------------------------------------------------------------------------
00001000                            76  SYSINIT
00001000                            77  ; INITIALIZES THE SYSTEM AS FOLLOWS:
00001000                            78  ; * DISABLES INTERRUPTS
00001000                            79  ; * CALLS SCRINIT
00001000                            80  ; * CALLS MOUINIT
00001000                            81  ; * ENABLES SIMULATOR EXCEPTION PROCESSING
00001000                            82  ; * SWITCHES TO USER
00001000                            83  ; INPUT    - NONE
00001000                            84  ; OUTPUT   - NONE
00001000                            85  ; MODIFIES - NONE
00001000                            86  ; NOTE     - NOTE THAT INTERRUPTS REMAIN DISABLED AFTER THIS SUBROUTINE
00001000                            87  ; -----------------------------------------------------------------------------
00001000                            88              
00001000                            89              
00001000  007C 0700                 90              OR.W    #$0700,SR               ; Disables interrupts
00001004  4EB9 0000107E             91              JSR     SCRINIT                 ; Calls to SCRINIT
0000100A  4EB9 00001020             92              JSR     MOUINIT                 ; Calls to MOUINIT
00001010  103C 0020                 93              MOVE.B  #32,D0                  ; Enable exception processing
00001014  123C 0005                 94              MOVE.B  #5,D1                   
00001018  4E4F                      95              TRAP    #15                      
0000101A  46FC 2000                 96              MOVE    #$2000,SR               ; Switches to user 
0000101E                            97              
0000101E  4E75                      98              RTS
00001020                            99  
00001020                           100  ; =============================================================================
00001020                           101  ; MOUSE MANAGEMENT (SYSTEM CODE)
00001020                           102  ; =============================================================================
00001020                           103  
00001020                           104  ; -----------------------------------------------------------------------------
00001020                           105  MOUINIT
00001020                           106  ; INITIALIZES MOUSE AS FOLLOWS:
00001020                           107  ; * STORES CURRENT MOUSE POSITION AND BUTTON STATUS INTO MOUY, MOUX AND MOUVAL
00001020                           108  ; * CLEARS MOUEDGE
00001020                           109  ; * INSTALLS MOUREAD INTO TRAP #MOUTRAP
00001020                           110  ; INPUT    - NONE
00001020                           111  ; OUTPUT   - NONE
00001020                           112  ; MODIFIES - ALL REGISTERS CAN BE MODIFIED
00001020                           113  ; -----------------------------------------------------------------------------
00001020                           114  
00001020  103C 003D                115              MOVE.B  #61, D0
00001024  123C 0000                116              MOVE.B  #0, D1
00001028  4E4F                     117              TRAP    #15
0000102A  C0BC 00000007            118              AND.L   #7, D0
00001030  13C0 00001BDE            119              MOVE.B  D0, MOUVAL
00001036  33C1 00001BDC            120              MOVE.W  D1, MOUX
0000103C  4841                     121              SWAP    D1
0000103E  33C1 00001BDA            122              MOVE.W  D1, MOUY            
00001044  4239 00001BDF            123              CLR.B   MOUEDGE                 ; clears MOUEDGE
0000104A  21FC 00001054 0084       124              MOVE.L  #MOUREAD,($80+MOUTRAP*4) ;Installs mouread into moutrap
00001052                           125              
00001052  4E75                     126              RTS
00001054                           127  
00001054                           128  ; -----------------------------------------------------------------------------
00001054                           129  MOUREAD
00001054                           130  ; MOUSE READING TRAP SERVICE ROUTINE. IT DOES THE FOLLOWING:
00001054                           131  ; * STORES CURRENT MOUSE POSITION INTO MOUY AND MOUX.
00001054                           132  ; * STORES CURRENT BUTTON STATUS INTO MOUVAL
00001054                           133  ; * COMPUTES AND STORES MOUEDGE
00001054                           134  ; INPUT    - NONE
00001054                           135  ; OUTPUT   - NONE
00001054                           136  ; MODIFIES - NONE
00001054                           137  ; -----------------------------------------------------------------------------
00001054                           138                         
00001054  303C 003D                139              MOVE.W  #61,D0
00001058  4281                     140              CLR.L   D1
0000105A  4E4F                     141              TRAP    #15
0000105C  23C1 00001BDA            142              MOVE.L  D1,(MOUY)               ; STORES CURRENT POS TO MOUX/Y
00001062  C03C 0007                143              AND.B   #7,D0                   ; AND TO GET ONLY THE LAST 3 BITS
00001066  1439 00001BDE            144              MOVE.B  (MOUVAL),D2             ; COMPUTE EDGE
0000106C  4602                     145              NOT.B   D2                      ; EDGE=NOT(PREVIOUS) AND CURRENT
0000106E  C400                     146              AND.B   D0,D2
00001070  13C0 00001BDE            147              MOVE.B  D0,(MOUVAL)             ; STORES MOUSE STATUS TO MOUVAL 
00001076  13C2 00001BDF            148              MOVE.B  D2,(MOUEDGE)            ; STORES MOUEDGE
0000107C                           149                  
0000107C  4E73                     150              RTE
0000107E                           151  
0000107E                           152  ; =============================================================================
0000107E                           153  ; SCREEN MANAGEMENT (SYSTEM CODE)
0000107E                           154  ; =============================================================================
0000107E                           155  
0000107E                           156  ; -----------------------------------------------------------------------------
0000107E                           157  SCRINIT
0000107E                           158  ; INITIALIZES THE SCREEN, SCREEN-RELATED INTERRUPT AND VARS AS FOLLOWS:
0000107E                           159  ; * INSTALLS SCRUPD INTO TRAP #SCRTRAP
0000107E                           160  ; * SETS OUTPUT RESOLUTION TO SCRWIDTH*SCRHEIGH
0000107E                           161  ; * SETS OUTPUT TO WINDOWED MODE
0000107E                           162  ; * ENABLES DOUBLE BUFFER AND CLEARS BOTH SCREEN BUFFERS
0000107E                           163  ; INPUT    - NONE
0000107E                           164  ; OUTPUT   - NONE
0000107E                           165  ; MODIFIES - ALL REGISTERS CAN BE MODIFIED
0000107E                           166  ; -----------------------------------------------------------------------------
0000107E  21FC 000010B6 0080       167              MOVE.L  #SCRUPD,($80+SCRTRAP*4) ; INSTALL TRAP
00001086  223C 03200258            168              MOVE.L  #SCRWIDTH<<16|SCRHEIGH,D1 ; SET RESOLUTION
0000108C  103C 0021                169              MOVE.B  #33,D0
00001090  4E4F                     170              TRAP    #15
00001092  7201                     171              MOVE.L  #1,D1                   ; SET WINDOWED MODE
00001094  4E4F                     172              TRAP    #15
00001096  323C FF00                173              MOVE.W  #$FF00,D1               ; CLEAR VISIBLE BUFFER
0000109A  103C 000B                174              MOVE.B  #11,D0
0000109E  4E4F                     175              TRAP    #15
000010A0  123C 0011                176              MOVE.B  #17,D1                  ; ENABLE DOUBLE BUFFER
000010A4  103C 005C                177              MOVE.B  #92,D0
000010A8  4E4F                     178              TRAP    #15
000010AA  323C FF00                179              MOVE.W  #$FF00,D1               ; CLEAR HIDDEN BUFFER
000010AE  103C 000B                180              MOVE.B  #11,D0
000010B2  4E4F                     181              TRAP    #15
000010B4  4E75                     182              RTS
000010B6                           183  
000010B6                           184  ; -----------------------------------------------------------------------------
000010B6                           185  SCRUPD
000010B6                           186  ; TRAP SERVICE ROUTINE IN CHARGE OF VISUALIZING CURRENT FRAME AND CLEARING
000010B6                           187  ; BUFFER FOR THE NEXT ONE. PERFORMS TWO TASKS:
000010B6                           188  ; * CLEARS ACTIVE (HIDDEN) GRAPHICS BUFFER
000010B6                           189  ; * SWITCHES ACTIVE AND VISIBLE GRAPHICS BUFFER
000010B6                           190  ; INPUT    - NONE
000010B6                           191  ; OUTPUT   - NONE
000010B6                           192  ; MODIFIES - NONE
000010B6                           193  ; -----------------------------------------------------------------------------
000010B6  48A7 C000                194              MOVEM.W D0-D1,-(A7)
000010BA  103C 005E                195              MOVE.B  #94,D0                  ; UPDATE DOUBLE BUFFER
000010BE  4E4F                     196              TRAP    #15
000010C0  323C FF00                197              MOVE.W  #$FF00,D1               ; CLEAR HIDDEN BUFFER
000010C4  103C 000B                198              MOVE.B  #11,D0
000010C8  4E4F                     199              TRAP    #15
000010CA  4C9F 0003                200              MOVEM.W (A7)+,D0-D1
000010CE  4E73                     201              RTE
000010D0                           202  
000010D0                           203  
000010D0                           204  
000010D0                           205  
000010D0                           206  
000010D0                           207  
000010D0                           208  -------------------- end include --------------------
000010D0                           209              INCLUDE "CONST.X68"             ; USER CONSTANTS
000010D0                           210  ; =============================================================================
000010D0                           211  ; TITLE    : USER CONSTANTS
000010D0                           212  ; AUTHOR   : ANTONI BURGUERA
000010D0                           213  ; HISTORY  : 05-JULY-2021 - CREATION
000010D0                           214  ; COMMENTS : * MOST OF THE CONSTANTS HELP IN PRODUCING A CLEAN CODE
000010D0                           215  ;              IN ACCORDANCE TO THE ASSIGNMENT SPECS, THOUGH THEIR USE IS
000010D0                           216  ;              NOT MANDATORY AS LONG AS THE ASSIGNMENT SPECS ARE FOLLOWED.
000010D0                           217  ;
000010D0                           218  ;            * THE UICOLORS ARE THE BASIC USER INTERFACE COLORS. USING THEM
000010D0                           219  ;              WILL LEAD TO A VISUALLY CONSISTENT USER INTERFACE.
000010D0                           220  ;
000010D0                           221  ;            * THE CHARACTER SIZES SPECIFY WIDTH AND HEIGHT IN PIXELS OF THE
000010D0                           222  ;              TEXT CHARACTERS. THIS SIZE DEPENDS ON THE SYSTEM (WINDOWS) FONTS
000010D0                           223  ;              AND CAN CHANGE FROM ONE COMPUTER TO ANOTHER. FEEL FREE TO ADAPT
000010D0                           224  ;              THEM TO YOUR OWN COMPUTER.
000010D0                           225  ;
000010D0                           226  ;            * CHARACTER SIZES ARE SPECIFIED AS AN EXPONENT AND THE SIZE ITSELF
000010D0                           227  ;              THE EXPONENT IS USEFUL TO MULTIPLY/DIVIDE, WHEN NECESSARY,
000010D0                           228  ;              USING SHIFTS. DEPENDING ON YOUR SYSTEM (WINDOWS) FONTS, CHAR
000010D0                           229  ;              SIZES MAY NOT BE POWER OF TWO. IF THIS IS THE CASE, DO YOUR BEST
000010D0                           230  ;              TO AVOID MULU AND DIVU.
000010D0                           231  ;
000010D0                           232  ;            * MOST OF THE GRD CONSTANTS ARE EXPRESSIONS TO EASE TESTING
000010D0                           233  ;              DIFFERENT RESOLUTIONS. IF TESTS WITH OTHER RESOLUTIONS ARE
000010D0                           234  ;              PERFORMED, TAKE INTO ACCOUNT THAT ALL EXPRESSIONS MUST EVALUATE
000010D0                           235  ;              TO INTEGER. IF THEY DON'T, UNEXPECTED RESULTS CAN HAPPEN.
000010D0                           236  ; =============================================================================
000010D0                           237  
000010D0                           238  ; --- UI COLORS ---------------------------------------------------------------
000010D0                           239  
000010D0  =00000000                240  CLRBLACK    EQU     $00000000               ; BLACK
000010D0  =00FFFFFF                241  CLRWHITE    EQU     $00FFFFFF               ; WHITE
000010D0  =00005500                242  CLRDKGRN    EQU     $00005500               ; DARK GREEN
000010D0  =00006600                243  CLRMDGRN    EQU     $00006600               ; MEDIUN GREEN
000010D0  =0000AA00                244  CLRLTGRN    EQU     $0000AA00               ; LIGHT GREEN
000010D0  =00FF0000                245  CLRLTBLU    EQU     $00FF0000               ; LIGHT BLUE
000010D0  =000000FF                246  CLRLTRED    EQU     $000000FF               ; LIGHT RED
000010D0                           247  
000010D0                           248  ; --- CHARACTER SIZES ---------------------------------------------------------
000010D0                           249  
000010D0  =00000004                250  CHRSHHEI    EQU     4                       ; CHARACTER HEIGHT AS EXPONENT OF 2
000010D0  =00000003                251  CHRSHWID    EQU     3                       ; CHARACTER WIDTH AS EXPONENT OF 2
000010D0  =00000010                252  CHRHEIGH    EQU     1<<CHRSHHEI             ; CHARACTER HEIGHT
000010D0  =00000008                253  CHRWIDTH    EQU     1<<CHRSHWID             ; CHARACTER WIDTH
000010D0                           254  
000010D0                           255  ; --- BUTTON ------------------------------------------------------------------
000010D0                           256  
000010D0  =00000004                257  BTNPENWD    EQU     4                       ; BUTTON LINE WIDTH
000010D0  =00005500                258  BTNPENCL    EQU     CLRDKGRN                ; BUTTON LINE COLOR
000010D0  =0000AA00                259  BTNSELCL    EQU     CLRLTGRN                ; BUTTON SELECTED FILL COLOR
000010D0  =00006600                260  BTNPRSCL    EQU     CLRMDGRN                ; BUTTON PRESSED FILL COLOR
000010D0  =00000006                261  BTNSZVDB    EQU     6                       ; SIZE (BYTES) OF VDB
000010D0                           262  
000010D0                           263  ; --- BUTTON LIST -------------------------------------------------------------
000010D0                           264  
000010D0  =0000000A                265  BTLMXVDB    EQU     10                      ; SIZE OF THE BUTTON LIST (ITEMS)
000010D0  =00000028                266  BTLVERSZ    EQU     40                      ; HEIGHT OF BUTTONS
000010D0  =0000000A                267  BTLVEMRG    EQU     10                      ; VERTICAL VISUAL MARGIN (TOP&BOT)
000010D0  =0000000A                268  BTLHOMRG    EQU     10                      ; HORIZONTAL VISUAL MARGIN (L & R)
000010D0                           269  
000010D0                           270  ; --- APPLICATION -------------------------------------------------------------
000010D0                           271  
000010D0  =00000000                272  GOLSPAUS    EQU     0                       ; PAUSED STATE
000010D0  =00000001                273  GOLSEXEC    EQU     1                       ; EXECUTION STATE
000010D0  =000000FA                274  GOLMAXGN    EQU     250                     ; MAXIMUM NUMBER OF GENERATIONS
000010D0                           275  
000010D0                           276  ; --- GRID --------------------------------------------------------------------
000010D0                           277  
000010D0  =00FF0000                278  GRDCOLP1    EQU     CLRLTBLU                ; PLAYER 1 COLOR
000010D0  =000000FF                279  GRDCOLP2    EQU     CLRLTRED                ; PLAYER 2 COLOR
000010D0  =00000006                280  GRDSHWID    EQU     6                       ; SHIFT TO ACHIEVE GRDWIDTH
000010D0  =00000005                281  GRDSHHEI    EQU     5                       ; SHIFT TO ACHIEVE GRDHEIGH
000010D0  =00000040                282  GRDWIDTH    EQU     1<<GRDSHWID             ; NUMBER OF GRID COLUMNS
000010D0  =00000020                283  GRDHEIGH    EQU     1<<GRDSHHEI             ; NUMBER OF ROWS
000010D0  =0000003F                284  GRDMSWID    EQU     GRDWIDTH-1              ; MASK TO GET X FROM GRID OFFSET
000010D0  =0000001F                285  GRDMSHEI    EQU     GRDHEIGH-1              ; MASK TO GET Y FROM GRID OFFSET
000010D0  =00000300                286  GRDPXWID    EQU     768                     ; GRID DISPLAY WIDTH (PIXELS)
000010D0  =00000180                287  GRDPXHEI    EQU     GRDHEIGH*GRDPXWID/GRDWIDTH ; GRID DISPLAY HEIGHT (PIXELS)
000010D0  =0000000C                288  GRDSZCEL    EQU     GRDPXWID/GRDWIDTH       ; GRID CELL SIZE (PIXELS)
000010D0  =0000006E                289  GRDVEMRG    EQU     3*BTLVEMRG+2*BTLVERSZ   ; TOP MARGIN (2 BUTTON ROWS)
000010D0  =00000010                290  GRDXOFF     EQU     (SCRWIDTH-GRDPXWID)/2   ; X OFFSETS TO DISPLAY CENTERED GRID
000010D0  =0000009E                291  GRDYOFF     EQU     (SCRHEIGH-GRDPXHEI+GRDVEMRG-BTLVEMRG)/2 ; Y OFFSET CENT. GRD
000010D0  =00000002                292  GRDSCP1X    EQU     GRDXOFF/CHRWIDTH        ; PLAYER 1 SCORE X (CHAR RESOL.)
000010D0  =00000009                293  GRDSCP1Y    EQU     GRDYOFF/CHRHEIGH        ; PLAYER 1 SCORE Y (CHAR RESOL.)
000010D0  =0000005E                294  GRDSCP2X    EQU     (GRDXOFF+GRDPXWID)/CHRWIDTH-4 ; PLAYER 2 SCORE X (CHAR RES.)
000010D0  =00000009                295  GRDSCP2Y    EQU     GRDYOFF/CHRHEIGH        ; PLAYER 2 SCORE Y (CHAR RESOL.)
000010D0  =00000030                296  GRDSCNGX    EQU     (SCRWIDTH/(CHRWIDTH*2))-2 ; NUM. GENER. X (CHAR RESOL.)
000010D0  =00000009                297  GRDSCNGY    EQU     GRDYOFF/CHRHEIGH        ; NUM. GENER. Y (CHAR RESOL.)
000010D0  =00000009                298  -------------------- end include --------------------
000010D0                           299              INCLUDE "UTIL.X68"              ; UTILITY CODE
000010D0                           300  ; =============================================================================
000010D0                           301  ; TITLE    : UTILITY SUBROUTINES
000010D0                           302  ; AUTHOR   : ANTONI BURGUERA
000010D0                           303  ; HISTORY  : 05-JULY-2021 - CREATION
000010D0                           304  ; COMMENTS : GENERAL PURPOSE SUBROUTINES.
000010D0                           305  ; =============================================================================
000010D0                           306  
000010D0                           307  ; -----------------------------------------------------------------------------
000010D0                           308  UTLINIT
000010D0                           309  ; INITIALIZES UTILITIES.
000010D0                           310  ; INPUT    : NONE
000010D0                           311  ; OUTPUT   : NONE
000010D0                           312  ; MODIFIES : NONE
000010D0                           313  ; -----------------------------------------------------------------------------
000010D0  4239 00001BE0            314              CLR.B   (UTLRNDIX)
000010D6  4E75                     315              RTS
000010D8                           316  
000010D8                           317  ; -----------------------------------------------------------------------------
000010D8                           318  UTLSTRLN
000010D8                           319  ; COMPUTES THE LENGTH OF A ZERO-TERMINATED STRING
000010D8                           320  ; INPUT    - A1 POINTER TO THE STRING
000010D8                           321  ; OUTPUT   - D0.W STRING LENGTH
000010D8                           322  ; MODIFIES - NONE (ASIDE OF OUTPUT)
000010D8                           323  ; -----------------------------------------------------------------------------
000010D8  2F09                     324              MOVE.L  A1,-(A7)
000010DA  4240                     325              CLR.W   D0
000010DC  4A19                     326  .LOOP       TST.B   (A1)+
000010DE  6700 0006                327              BEQ     .END
000010E2  5240                     328              ADDQ.W  #1,D0
000010E4  60F6                     329              BRA     .LOOP
000010E6  225F                     330  .END        MOVE.L  (A7)+,A1
000010E8  4E75                     331              RTS
000010EA                           332  
000010EA                           333  ; -----------------------------------------------------------------------------
000010EA                           334  UTLRAND
000010EA                           335  ; PROVIDES A PSEUDO-RANDOM COIN FLIP (RETURNS 1 OR 2)
000010EA                           336  ; INPUT    - NONE
000010EA                           337  ; OUTPUT   - D1.L RANDOM VALUE (ONLY BYTE)
000010EA                           338  ; MODIFIES - NONE (ASIDE OF OUTPUT)
000010EA                           339  ; -----------------------------------------------------------------------------
000010EA  2F08                     340              MOVE.L  A0,-(A7)
000010EC  41F9 00001108            341              LEA     .RANDVEC,A0
000010F2  4281                     342              CLR.L   D1
000010F4  1239 00001BE0            343              MOVE.B  (UTLRNDIX),D1
000010FA  1230 1800                344              MOVE.B  (A0,D1.L),D1
000010FE  5239 00001BE0            345              ADDQ.B  #1,(UTLRNDIX)
00001104  205F                     346              MOVE.L  (A7)+,A0
00001106  4E75                     347              RTS
00001108                           348  
00001108= 02 02 02 02 01 02 ...    349  .RANDVEC    DC.B    2, 2, 2, 2, 1, 2, 1, 2
00001110= 01 01 01 02 01 01 ...    350              DC.B    1, 1, 1, 2, 1, 1, 1, 2
00001118= 02 01 02 01 01 02 ...    351              DC.B    2, 1, 2, 1, 1, 2, 2, 1
00001120= 02 01 02 01 01 01 ...    352              DC.B    2, 1, 2, 1, 1, 1, 1, 2
00001128= 02 02 01 01 02 02 ...    353              DC.B    2, 2, 1, 1, 2, 2, 1, 1
00001130= 02 01 02 02 02 01 ...    354              DC.B    2, 1, 2, 2, 2, 1, 1, 1
00001138= 02 02 01 01 01 01 ...    355              DC.B    2, 2, 1, 1, 1, 1, 1, 2
00001140= 01 01 01 02 01 02 ...    356              DC.B    1, 1, 1, 2, 1, 2, 1, 2
00001148= 02 02 02 02 01 02 ...    357              DC.B    2, 2, 2, 2, 1, 2, 1, 2
00001150= 01 01 02 02 02 01 ...    358              DC.B    1, 1, 2, 2, 2, 1, 2, 1
00001158= 02 02 02 01 01 02 ...    359              DC.B    2, 2, 2, 1, 1, 2, 1, 1
00001160= 01 02 01 01 01 02 ...    360              DC.B    1, 2, 1, 1, 1, 2, 1, 2
00001168= 01 02 02 01 02 01 ...    361              DC.B    1, 2, 2, 1, 2, 1, 2, 2
00001170= 01 02 01 02 01 01 ...    362              DC.B    1, 2, 1, 2, 1, 1, 2, 1
00001178= 01 02 01 01 01 01 ...    363              DC.B    1, 2, 1, 1, 1, 1, 1, 1
00001180= 02 01 01 02 01 01 ...    364              DC.B    2, 1, 1, 2, 1, 1, 1, 2
00001188= 02 01 01 01 01 02 ...    365              DC.B    2, 1, 1, 1, 1, 2, 1, 1
00001190= 01 01 02 01 01 02 ...    366              DC.B    1, 1, 2, 1, 1, 2, 1, 2
00001198= 02 02 01 01 02 02 ...    367              DC.B    2, 2, 1, 1, 2, 2, 2, 2
000011A0= 01 01 02 01 02 02 ...    368              DC.B    1, 1, 2, 1, 2, 2, 1, 2
000011A8= 01 02 01 02 02 02 ...    369              DC.B    1, 2, 1, 2, 2, 2, 2, 1
000011B0= 01 01 02 02 01 01 ...    370              DC.B    1, 1, 2, 2, 1, 1, 2, 1
000011B8= 02 02 01 02 01 02 ...    371              DC.B    2, 2, 1, 2, 1, 2, 1, 1
000011C0= 02 01 02 01 01 02 ...    372              DC.B    2, 1, 2, 1, 1, 2, 1, 2
000011C8= 01 01 02 02 02 01 ...    373              DC.B    1, 1, 2, 2, 2, 1, 1, 1
000011D0= 01 01 02 02 01 02 ...    374              DC.B    1, 1, 2, 2, 1, 2, 1, 2
000011D8= 01 02 01 01 01 02 ...    375              DC.B    1, 2, 1, 1, 1, 2, 1, 1
000011E0= 02 01 01 02 01 02 ...    376              DC.B    2, 1, 1, 2, 1, 2, 2, 2
000011E8= 02 01 01 01 02 02 ...    377              DC.B    2, 1, 1, 1, 2, 2, 1, 1
000011F0= 02 02 02 01 02 02 ...    378              DC.B    2, 2, 2, 1, 2, 2, 1, 2
000011F8= 01 02 01 01 02 01 ...    379              DC.B    1, 2, 1, 1, 2, 1, 2, 2
00001200= 02 02 02 01 01 01 ...    380              DC.B    2, 2, 2, 1, 1, 1, 1, 2
00001200= 02 02 02 01 01 01 ...    381  -------------------- end include --------------------
00001208                           382              INCLUDE "BUTTON.X68"            ; BUTTON MANAGEMENT
00001208                           383  ; =============================================================================
00001208                           384  ; TITLE    : BUTTON MANAGEMENT
00001208                           385  ; AUTHOR   : ANTONI BURGUERA
00001208                           386  ; HISTORY  : 05-JULY-2021 - CREATION
00001208                           387  ; COMMENTS : * A BUTTON IS DEFINED BY A STATIC DATA BLOCK (SDB), WHICH DOES NOT
00001208                           388  ;              CHANGE OVER TIME, AND A VARIABLE DATA BLOCK (VDB), THAT CAN
00001208                           389  ;              CHANGE OVER TIME. CHANGES IN THE VDB ARE PRODUCED WHEN CALLING
00001208                           390  ;              SUBROUTINE BTNUPD.
00001208                           391  ;
00001208                           392  ;            * THE BUTTON SDB (CAN BE IN ROM) HAS THE FOLLOWING FIELDS. THE
00001208                           393  ;              NUMBER DENOTES THE OFFSET WITH RESPECT TO THE SDB START:
00001208                           394  ;
00001208                           395  ;                +0  - WORD - YTOP COORDINATE (PIXELS)
00001208                           396  ;                +2  - WORD - XLEFT COORDINATE (PIXELS)
00001208                           397  ;                +4  - WORD - HEIGHT (PIXELS)
00001208                           398  ;                +6  - WORD - WIDTH (PIXELS)
00001208                           399  ;                +8  - LONG - CALLBACK POINTER
00001208                           400  ;                +12 - BYTE STRING - ZERO TERMINATED STRING. TEXT TO SHOW.
00001208                           401  ;
00001208                           402  ;            * THE BUTTON VDB (MUST BE IN RAM) IS:
00001208                           403  ;
00001208                           404  ;                +0 - LONG - POINTER TO THE STATIC DATABLOCK
00001208                           405  ;                +4 - BYTE - STATUS WITH FORMAT XXXXXCPI WHERE:
00001208                           406  ;                            - I (BIT 0) - 1=MOUSE INSIDE, 0=MOUSE OUTSIDE
00001208                           407  ;                            - P (BIT 1) - 1=MOUSE PRESSED INSIDE
00001208                           408  ;                                          0=MOUSE NOT PRESSED INSIDE
00001208                           409  ;                            - C (BIT 2) - 1=MOUSE CLICKED INSIDE
00001208                           410  ;                                          0=MOUSE NOT CLICKED INSIDE
00001208                           411  ;                            NOTE THAT IF I=0 THEN P=C=0, IF I=1 AND P=0
00001208                           412  ;                            THEN C=0.
00001208                           413  ; =============================================================================
00001208                           414  
00001208                           415  ; -----------------------------------------------------------------------------
00001208                           416  BTNINIT
00001208                           417  ; INITIALIZES THE BUTTON BY:
00001208                           418  ;  * COPYING THE SDB POINTER INTO THE VDB.
00001208                           419  ;  * CLEARING THE STATUS BYTE.
00001208                           420  ; INPUT    : A0 - POINTER TO THE VARIABLE DATABLOCK
00001208                           421  ;            A1 - POINTER TO THE STATIC DATABLOCK
00001208                           422  ; OUTPUT   : NONE
00001208                           423  ; MODIFIES : NONE
00001208                           424  ; -----------------------------------------------------------------------------
00001208                           425  
00001208  48E7 FFC0                426              MOVEM.L D0-D7/A0-A1,-(A7)       ; Save content registers
0000120C                           427              
0000120C  2089                     428              MOVE.L  A1,(A0)                 ; Copy SDB pointer into VDB
0000120E  4228 0004                429              CLR.B   4(A0)                   ; CLEAR STATUS BYTE(VDB)                
00001212                           430  
00001212  4CDF 03FF                431              MOVEM.L (A7)+,D0-D7/A0-A1       ; Restore content resgiters
00001216                           432              
00001216  4E75                     433              RTS
00001218                           434  
00001218                           435  ; -----------------------------------------------------------------------------
00001218                           436  BTNUPD
00001218                           437  ; UPDATES THE BUTTON VDB AND EXECUTES THE CALLBACK IF REQUIRED
00001218                           438  ; INPUT    : A0 - POINTER TO THE VARIABLE DATABLOCK
00001218                           439  ; OUTPUT   : NONE
00001218                           440  ; MODIFIES : NONE
00001218                           441  ; -----------------------------------------------------------------------------
00001218                           442              
00001218  48E7 FCE0                443              MOVEM.L D0-D5/A0-A2,-(A7)       ; Save content registers
0000121C                           444              
0000121C  117C 0000 0004           445              MOVE.B   #0,4(A0)               ; CLEAR STATUS BYTE
00001222  2250                     446              MOVE.L  (A0),A1                 ; COPY @ SDB OF BUTTON
00001224                           447              
00001224                           448              ; COPY MOUSE POSITION
00001224  3039 00001BDA            449              MOVE.W  MOUY,D0                 ; COPY MOUSE Y POSITION
0000122A  3239 00001BDC            450              MOVE.W  MOUX,D1                 ; COPY MOUSE X POSITION
00001230                           451              
00001230                           452              ; GET BUTTON POSITION
00001230  3419                     453              MOVE.W  (A1)+,D2                ; TOP Y
00001232  3619                     454              MOVE.W  (A1)+,D3                ; LEFT X
00001234  3819                     455              MOVE.W  (A1)+,D4                ; HEIGHT
00001236  3A19                     456              MOVE.W  (A1)+,D5                ; WIDTH  
00001238                           457              
00001238                           458              ; IF D2<D0 MOUSE NOT INSIDE (IS UPPER THAN THE BUTTON)
00001238  B042                     459              CMP.W   D2,D0
0000123A  6D00 004A                460              BLT     .MOUSEOUT
0000123E                           461              
0000123E                           462              ; IF D3<D1 MOUSE NOT INSIDE (IS ON THE LEFT SIDE)
0000123E  B243                     463              CMP.W   D3,D1
00001240  6D00 0044                464              BLT     .MOUSEOUT
00001244                           465              
00001244                           466              ; IF D4>D0 MOUSE NOT INSIDE (IS LOWER THAN THE BUTTON)
00001244  D842                     467              ADD.W   D2,D4
00001246  B044                     468              CMP.W   D4,D0
00001248  6E00 003C                469              BGT     .MOUSEOUT
0000124C                           470              
0000124C                           471              ; IF D5>D0 MOUSE NOT INSIDE (IS ON THE RIGHT SIDE)
0000124C  DA43                     472              ADD.W   D3,D5
0000124E  B245                     473              CMP.W   D5,D1
00001250  6E00 0034                474              BGT     .MOUSEOUT
00001254                           475  
00001254                           476              ; UPDATE VDB 
00001254  117C 0001 0004           477              MOVE.B  #1,4(A0)                ; I (BIT 0) = 1
0000125A  0839 0000 00001BDE       478              BTST    #0,MOUVAL               ; BUTTON NOT PRESSED?
00001262  6700 0026                479              BEQ     .END                    ; BUTTON NOT PRESSED
00001266  117C 0003 0004           480              MOVE.B  #3,4(A0)                ; P (BIT 1) = 1
0000126C  0839 0000 00001BDF       481              BTST    #0,MOUEDGE              ; BUTTON NOT CLICKED?
00001274  6700 0014                482              BEQ     .END                    ; BUTTON NOT CLICKED
00001278  117C 0007 0004           483              MOVE.B  #7,4(A0)                ; C (BIT 2) = 1
0000127E                           484              
0000127E                           485              ; EXECUTE CALLBACK
0000127E  2451                     486              MOVE.L  (A1),A2                 ; COPY @ CALLBACK
00001280  4E92                     487              JSR     (A2)                    ; JUMP TO CALLBACK SUBR
00001282  6000 0006                488              BRA     .END                    
00001286                           489              
00001286  4228 0004                490  .MOUSEOUT   CLR.B   4(A0)                   ; I,P,C = 0
0000128A                           491  
0000128A  4CDF 073F                492  .END        MOVEM.L (A7)+,D0-D5/A0-A2       ; Restore content resgiters
0000128E                           493             
0000128E  4E75                     494              RTS
00001290                           495  
00001290                           496  ; -----------------------------------------------------------------------------
00001290                           497  BTNPLOT
00001290                           498  ; PLOTS THE BUTTON. A RECTANGLE IS DRAWN WITH THICKNESS BTNPENWD. THE CONTOUR
00001290                           499  ; COLOR IS BTNPENCL. THE FILL COLOR IS BLACK IF THE MOUSE IS NOT INSIDE,
00001290                           500  ; BTNSELCL IF THE MOUSE IS INSIDE BUT THE MOUSE BUTTON IS NOT PRESSED AND
00001290                           501  ; BTNPRSCL IF THE MOUSE BUTTON IS PRESSED INSIDE.
00001290                           502  ; INPUT    : A0 - POINTER TO THE VARIABLE DATABLOCK
00001290                           503  ; OUTPUT   : NONE
00001290                           504  ; MODIFIES : NONE
00001290                           505  ; -----------------------------------------------------------------------------
00001290                           506  
00001290  48E7 FFE0                507              MOVEM.L D0-D7/A0-A2,-(A7)       ; Save content registers
00001294                           508              
00001294                           509              ; SET PEN COLOR
00001294  103C 0050                510              MOVE.B  #80,D0
00001298  223C 00005500            511              MOVE.L  #BTNPENCL,D1
0000129E  4E4F                     512              TRAP    #15
000012A0                           513              
000012A0                           514              ; SET PEN WIDTH/THICKNESS
000012A0  103C 005D                515              MOVE.B  #93,D0
000012A4  7204                     516              MOVE.L  #BTNPENWD,D1
000012A6  4E4F                     517              TRAP    #15
000012A8                           518              
000012A8  0C28 0000 0004           519              CMP.B   #0,4(A0)                
000012AE  6700 0020                520              BEQ     .MOUSEOUT
000012B2                           521      
000012B2  0C28 0002 0004           522              CMP.B   #2,4(A0) 
000012B8  6700 000C                523              BEQ     .MOUPRESD 
000012BC                           524      
000012BC                           525              ; MOUSE INSIDE   
000012BC  223C 0000AA00            526              MOVE.L  #BTNSELCL,D1
000012C2  6000 000E                527              BRA     .SALIR
000012C6                           528                
000012C6  223C 00006600            529  .MOUPRESD   MOVE.L  #BTNPRSCL,D1            ; MOUSE PRESSED
000012CC  6000 0004                530              BRA     .SALIR
000012D0                           531              
000012D0  7200                     532  .MOUSEOUT   MOVE.L  #CLRBLACK,D1            ; MOUSE OUTSIDE
000012D2                           533              
000012D2  103C 0051                534  .SALIR      MOVE.B  #81,D0                  ; SET FILL COLOR
000012D6  4E4F                     535              TRAP    #15
000012D8                           536              
000012D8  2250                     537              MOVE.L  (A0),A1                 ; COPY @ SDB OF BUTTON
000012DA  4281                     538              CLR.L   D1
000012DC                           539              
000012DC                           540              ; GET COORDINATES(UP)
000012DC  3419                     541              MOVE.W  (A1)+,D2                ; UPPER Y
000012DE  3219                     542              MOVE.W  (A1)+,D1                ; LEFT X
000012E0                           543              
000012E0                           544              ; GET HEIGHT
000012E0  3819                     545              MOVE.W  (A1)+,D4
000012E2  3F04                     546              MOVE.W  D4,-(A7)
000012E4                           547              
000012E4                           548              ; GET WIDTH 
000012E4  3619                     549              MOVE.W  (A1)+,D3
000012E6  3E03                     550              MOVE.W  D3,D7
000012E8                           551  
000012E8                           552              ; GET COORDINATES(LOW)
000012E8  D641                     553              ADD.W   D1,D3                   ; RIGHT X
000012EA  3A02                     554              MOVE.W  D2,D5                   
000012EC  DA44                     555              ADD.W   D4,D5                   ; LOWER Y
000012EE  3805                     556              MOVE.W  D5,D4 
000012F0                           557              
000012F0                           558              ; DRAW BUTTON
000012F0  103C 0057                559              MOVE.B  #87,D0
000012F4  4E4F                     560              TRAP    #15
000012F6                           561              
000012F6                           562              ; SET PEN COLOR
000012F6  3A01                     563              MOVE.W  D1,D5                   ; SAVE D1 CONTENT
000012F8  103C 0050                564              MOVE.B  #80,D0
000012FC  223C 00FFFFFF            565              MOVE.L  #CLRWHITE,D1
00001302  4E4F                     566              TRAP    #15
00001304  4281                     567              CLR.L   D1
00001306  3205                     568              MOVE.W  D5,D1                   ; RESTORE D1
00001308                           569              
00001308                           570              ; GET & DRAW TEXT
00001308  5849                     571              ADD.W   #4,A1
0000130A                           572              ; TEXTWIDTH  = NUMCAR*CHRWIDTH ; CHARACTER WIDTH
0000130A                           573              ; TEXTHEIGHT = CHRHEIGH        ; CHARACTER HEIGHT
0000130A  4285                     574              CLR.L   D5
0000130C  2450                     575              MOVE.L  (A0),A2
0000130E  D4FC 000C                576              ADD.W   #12,A2
00001312  1C1A                     577              MOVE.B  (A2)+,D6
00001314  BC7C 0000                578  .LOOP       CMP     #0,D6                   ; GET TEXT LENGTH            
00001318  6700 0008                579              BEQ     .DONE
0000131C  5245                     580              ADD.W   #1,D5
0000131E  1C1A                     581              MOVE.B  (A2)+,D6                
00001320  60F2                     582              BRA     .LOOP
00001322  CAFC 0008                583  .DONE       MULU.W  #CHRWIDTH,D5
00001326  9E45                     584              SUB.W   D5,D7                   ; WIDTH-TEXTWIDTH
00001328  8EFC 0002                585              DIVU.W  #2,D7                   ; (WIDTH-TEXTWIDTH)/2
0000132C  D247                     586              ADD.W   D7,D1                   ; LEFTX +(WIDTH-TEXTWIDTH)/2
0000132E                           587  
0000132E  381F                     588              MOVE.W  (A7)+,D4
00001330  0444 0010                589              SUB.W   #CHRHEIGH,D4            ; HEIGHT-TEXTHEIGHT
00001334  88FC 0002                590              DIVU.W  #2,D4                   ; (HEIGHT-TEXTHEIGHT)/2
00001338  D444                     591              ADD.W   D4,D2                   ; UPPERY+(HEIGHT-TEXTHEIGHT)/2
0000133A                           592              
0000133A  103C 005F                593              MOVE.B  #95,D0
0000133E  4E4F                     594              TRAP    #15
00001340                           595              
00001340  4CDF 07FF                596              MOVEM.L (A7)+,D0-D7/A0-A2       ; Restore content resgiters
00001344                           597              
00001344  4E75                     598              RTS
00001346                           599                  
00001346                           600  
00001346                           601  -------------------- end include --------------------
00001346                           602              INCLUDE "BTNLIST.X68"           ; BUTTON LIST MANAGEMENT
00001346                           603  ; =============================================================================
00001346                           604  ; TITLE    : BUTTON LIST MANAGEMENT
00001346                           605  ; AUTHOR   : ANTONI BURGUERA
00001346                           606  ; HISTORY  : 05-JULY-2021 - CREATION
00001346                           607  ; COMMENTS : * ALLOWS ADDING, UPDATING AND PLOTTING A LIST OF BUTTONS. ALLOWS
00001346                           608  ;              REMOVING THEM ALL, BUT NOT INDIVIDUALLY.
00001346                           609  ;
00001346                           610  ;            * THE LIST OF BUTTONS IS STORED AS A LIST OF BUTTON'S VDB. THIS
00001346                           611  ;              LIST IS STORED AT BTLDATA.
00001346                           612  ;
00001346                           613  ;            * THE LIST OF VBD IS BUILT ASSUMING A MAXIMUM OF BTLMXVDB BUTTONS
00001346                           614  ;              AND A SIZE OF BTNSZVDB BYTES FOR EACH VDB.
00001346                           615  ; =============================================================================
00001346                           616  
00001346                           617  ; -----------------------------------------------------------------------------
00001346                           618  BTLINIT
00001346                           619  ; INITIALIZES BUTTON LIST BY SETTING ALL THE POINTERS TO STATIC DATA BLOCKS
00001346                           620  ; TO $FFFFFFFF.
00001346                           621  ; INPUT    : NONE
00001346                           622  ; OUTPUT   : NONE
00001346                           623  ; MODIFIES : NONE
00001346                           624  ; -----------------------------------------------------------------------------
00001346  48E7 8080                625              MOVEM.L D0/A0,-(A7)
0000134A  41F9 00001BE2            626              LEA     BTLDATA,A0
00001350  303C 0009                627              MOVE.W  #BTLMXVDB-1,D0          ; NUM ITERATIONS
00001354  20BC FFFFFFFF            628  .LOOP       MOVE.L  #$FFFFFFFF,(A0)         ; MARK SLOT AS EMPTY
0000135A  5C88                     629              ADD.L   #BTNSZVDB,A0            ; GO TO NEXT SLOT
0000135C  51C8 FFF6                630              DBRA.W  D0,.LOOP                ; LOOP FOR ALL SLOTS
00001360  4CDF 0101                631              MOVEM.L (A7)+,D0/A0
00001364  4E75                     632              RTS
00001366                           633  
00001366                           634  ; -----------------------------------------------------------------------------
00001366  =00001346                635  BTLCLEAR    EQU     BTLINIT
00001366                           636  ; CLEARS THE BUTTON LIST. SAME AS BTLINIT.
00001366                           637  ; INPUT    : NONE
00001366                           638  ; OUTPUT   : NONE
00001366                           639  ; MODIFIES : NONE
00001366                           640  ; -----------------------------------------------------------------------------
00001366                           641  
00001366                           642  ; -----------------------------------------------------------------------------
00001366                           643  BTLADD
00001366                           644  ; ADDS A NEW BUTTON INTO THE BUTTON LIST AND INITS IT.
00001366                           645  ; INPUT    : A1 - POINTER TO THE BUTTON SDB
00001366                           646  ; OUTPUT   : NONE
00001366                           647  ; MODIFIES : NONE
00001366                           648  ; -----------------------------------------------------------------------------
00001366  48E7 8080                649              MOVEM.L A0/D0,-(A7)
0000136A                           650  
0000136A                           651              ; SEARCH FOR AN EMPTY SLOT
0000136A                           652  
0000136A  41F9 00001BE2            653              LEA     BTLDATA,A0
00001370  303C 0009                654              MOVE.W  #BTLMXVDB-1,D0
00001374  0C90 FFFFFFFF            655  .LOOP       CMP.L   #$FFFFFFFF,(A0)
0000137A  6700 000E                656              BEQ     .FOUND
0000137E  5C88                     657              ADD.L   #BTNSZVDB,A0
00001380  51C8 FFF2                658              DBRA.W  D0,.LOOP
00001384                           659  
00001384                           660              ; NO SLOT? DO NOTHING
00001384                           661  
00001384  4CDF 0101                662  .END        MOVEM.L (A7)+,A0/D0
00001388  4E75                     663              RTS
0000138A                           664  
0000138A                           665              ; SLOT FOUND? PLACE THE BUTTON THERE BY CALLING BTNINIT
0000138A                           666  
0000138A  4EB8 1208                667  .FOUND      JSR     BTNINIT
0000138E  60F4                     668              BRA     .END
00001390                           669  
00001390                           670  ; -----------------------------------------------------------------------------
00001390                           671  BTLUPD
00001390                           672  ; CALLS BTNUPD FOR ALL THE BUTTONS IN THE BUTTON LIST.
00001390                           673  ; INPUT    : NONE
00001390                           674  ; OUTPUT   : NONE
00001390                           675  ; MODIFIES : NONE
00001390                           676  ; -----------------------------------------------------------------------------
00001390                           677  
00001390  48E7 8080                678              MOVEM.L A0/D0,-(A7)
00001394                           679  
00001394                           680              ; TRAVERSE THE LIST
00001394                           681  
00001394  41F9 00001BE2            682              LEA     BTLDATA,A0
0000139A  303C 0009                683              MOVE.W  #BTLMXVDB-1,D0
0000139E  0C90 FFFFFFFF            684  .LOOP       CMP.L   #$FFFFFFFF,(A0)
000013A4  6700 000C                685              BEQ     .DONE
000013A8                           686  
000013A8                           687              ; UPDATE EACH BUTTON
000013A8                           688  
000013A8  4EB8 1218                689              JSR     BTNUPD
000013AC                           690  
000013AC                           691              ; GO TO THE NEXT BUTTON
000013AC                           692  
000013AC  5C88                     693              ADD.L   #BTNSZVDB,A0
000013AE  51C8 FFEE                694              DBRA.W  D0,.LOOP
000013B2                           695  
000013B2  4CDF 0101                696  .DONE       MOVEM.L (A7)+,A0/D0
000013B6  4E75                     697              RTS
000013B8                           698  
000013B8                           699  
000013B8                           700  ; -----------------------------------------------------------------------------
000013B8                           701  BTLPLOT
000013B8                           702  ; CALLS BTNPLOT FOR ALL THE BUTTONS IN THE BUTTON LIST.
000013B8                           703  ; INPUT    : NONE
000013B8                           704  ; OUTPUT   : NONE
000013B8                           705  ; MODIFIES : NONE
000013B8                           706  ; -----------------------------------------------------------------------------
000013B8                           707  
000013B8                           708  ; TODO : PLACE YOUR CODE HERE
000013B8                           709              ; JSR BTLUPD
000013B8                           710              ; RTS
000013B8  48E7 8080                711              MOVEM.L A0/D0,-(A7)             ; Save content registers
000013BC                           712              
000013BC  41F9 00001BE2            713              LEA     BTLDATA,A0              ; @ OF THE BUTTONS
000013C2  303C 0009                714              MOVE.W  #BTLMXVDB-1,D0
000013C6  0C90 FFFFFFFF            715  .LOOP       CMP.L   #$FFFFFFFF,(A0)         ; Until end of list
000013CC  6700 000C                716              BEQ     .DONE
000013D0                           717  
000013D0  4EB8 1290                718              JSR     BTNPLOT                 ; Calls BTNUPD
000013D4                           719  
000013D4  5C88                     720              ADD.L   #BTNSZVDB,A0            ; Next button
000013D6  51C8 FFEE                721              DBRA.W  D0,.LOOP
000013DA                           722              
000013DA  4CDF 0101                723  .DONE       MOVEM.L (A7)+,A0/D0             ; Restore content resgiters
000013DE                           724              
000013DE  4E75                     725              RTS
000013E0                           726  
000013E0                           727              
000013E0                           728  
000013E0                           729  
000013E0                           730  
000013E0                           731  
000013E0                           732  
000013E0                           733  
000013E0                           734  
000013E0                           735  
000013E0                           736  
000013E0                           737  -------------------- end include --------------------
000013E0                           738              INCLUDE "GRID.X68"              ; GRID MANAGEMENT
000013E0                           739  ; =============================================================================
000013E0                           740  ; TITLE    : GRID MANAGEMENT
000013E0                           741  ; AUTHOR   : ANTONI BURGUERA
000013E0                           742  ; HISTORY  : 05-JULY-2021 - CREATION
000013E0                           743  ; COMMENTS : * THERE ARE TWO MATRICES (GRDMATR0 AND GRDMATR1) AND TWO POINTERS
000013E0                           744  ;              TO THESE MATRICES (GRDSRC AND GRDDST).
000013E0                           745  ;
000013E0                           746  ;            * THE MATRIX TO BE PLOTTED IS ALWAYS THE ONE POINTED BY GRDDST.
000013E0                           747  ;
000013E0                           748  ;            * THE MATRIX TO BE UPDATED BY THE MOUSE (GRDMUPD) IS ALWAYS THE
000013E0                           749  ;              ONE POINTED BY GRDDST.
000013E0                           750  ;
000013E0                           751  ;            * THE RULES-UPDATE (GRDRUPD) SWITCHES THE POINTERS AND THEN READS
000013E0                           752  ;              THE NEW SOURCE MATRIX (GRDSRC) TO DETERMINE THE NUMBER OF
000013E0                           753  ;              NEIGHBORS. THE RESULTING CELL VALUE IS WRITTEN TO THE DESTINA-
000013E0                           754  ;              TION MATRIX, POINTED BY GRDDST.
000013E0                           755  ; =============================================================================
000013E0                           756  
000013E0                           757  ; -----------------------------------------------------------------------------
000013E0                           758  GRDINIT
000013E0                           759  ; INITIALIZE THE GRID AS FOLLOWS:
000013E0                           760  ; * POINTS THE SOURCE GRID POINTER TO GRDMATR0.
000013E0                           761  ; * POINTS THE DESTINATION GRID POINTER TO GRDMATR1.
000013E0                           762  ; * RESETS THE COUNTERS (GRDNPLR1, GRDNPLR2, GRDNGEN).
000013E0                           763  ; * FILLS THE TWO MATRICES (GRDMATR0 AND GRDMATR1) WITH ZEROS.
000013E0                           764  ; INPUT    : NONE
000013E0                           765  ; OUTPUT   : NONE
000013E0                           766  ; MODIFIES : NONE
000013E0                           767  ; -----------------------------------------------------------------------------
000013E0  48E7 8080                768              MOVEM.L A0/D0,-(A7)
000013E4  23FC 00001C26 00001C1E   769              MOVE.L  #GRDMATR0,(GRDSRC)
000013EE  23FC 00002426 00001C22   770              MOVE.L  #GRDMATR1,(GRDDST)
000013F8  4279 00002C26            771              CLR.W   (GRDNPLR1)
000013FE  4279 00002C28            772              CLR.W   (GRDNPLR2)
00001404  4279 00002C2A            773              CLR.W   (GRDNGEN)
0000140A  41F9 00001C26            774              LEA     GRDMATR0,A0
00001410  303C 0FFF                775              MOVE.W  #GRDWIDTH*GRDHEIGH*2-1,D0
00001414  4218                     776  .LOOP       CLR.B   (A0)+
00001416  51C8 FFFC                777              DBRA.W  D0,.LOOP
0000141A  4CDF 0101                778              MOVEM.L (A7)+,A0/D0
0000141E  4E75                     779              RTS
00001420                           780  
00001420                           781  ; -----------------------------------------------------------------------------
00001420                           782  GRDMUPD
00001420                           783  ; GRID UPDATE USING MOUSE. THE INTERFACE IS AS FOLLOWS:
00001420                           784  ; * IF MOUSE IS NOT PRESSED OR IS OUTSIDE THE PLOTTED GRID, DOES NOTHING.
00001420                           785  ; * IF LEFT MOUSE BUTTON IS PRESSED INSIDE THE GRID:
00001420                           786  ;   - A PLAYER 1 (VALUE=1) CELL IS CREATED AT THE MOUSE POSITION IF THE MOUSE
00001420                           787  ;     IS ON THE LEFT HALF OF THE GRID.
00001420                           788  ;   - A PLAYER 2 (VALUE=2) CELL IS CREATED AT THE MOUSE POSITION IF THE MOUSE
00001420                           789  ;     IS ON THE RIGHT HALF OF THE GRID.
00001420                           790  ; * IF RIGHT MOUSE BUTTON IS PRESSED INSIDE THE GRID, THE CELL WHERE THE MOUSE
00001420                           791  ;   IS IS CLEARED (VALUE=0).
00001420                           792  ; INPUT    : NONE
00001420                           793  ; OUTPUT   : NONE
00001420                           794  ; MODIFIES : NONE
00001420                           795  ; -----------------------------------------------------------------------------
00001420                           796  
00001420                           797  ; TODO : PLACE YOUR CODE HERE
00001420                           798  
00001420                           799  
00001420  48E7 FFFE                800              MOVEM.L D0-D7/A0-A6,-(A7)
00001424                           801  
00001424  3039 00001BDA            802              MOVE.W  MOUY,D0                 ; COPY MOUSE Y POSITION
0000142A  3239 00001BDC            803              MOVE.W  MOUX,D1                 ; COPY MOUSE X POSITION
00001430                           804              
00001430                           805              ; GET GRID POSITION
00001430  343C 009E                806              MOVE.W  #GRDYOFF,D2              ; TOP Y
00001434  363C 0010                807              MOVE.W  #GRDXOFF,D3              ; LEFT X
00001438  383C 0020                808              MOVE.W  #GRDHEIGH,D4             ; HEIGHT
0000143C  3A3C 0040                809              MOVE.W  #GRDWIDTH,D5             ; WIDTH  
00001440                           810              
00001440                           811              ; IF D2<D0 MOUSE NOT INSIDE (IS UPPER THAN THE BUTTON)
00001440  B042                     812              CMP.W   D2,D0
Line 813 ERROR: Undefined symbol
00001442  6D00 A8D2                813              BLT     .END
00001446                           814              
00001446                           815              ; IF D3<D1 MOUSE NOT INSIDE (IS ON THE LEFT SIDE)
00001446  B243                     816              CMP.W   D3,D1
Line 817 ERROR: Undefined symbol
00001448  6D00 A8CC                817              BLT     .END
0000144C                           818              
0000144C                           819              ; IF D4>D0 MOUSE NOT INSIDE (IS LOWER THAN THE BUTTON)
0000144C  D842                     820              ADD.W   D2,D4
0000144E  B044                     821              CMP.W   D4,D0
Line 822 ERROR: Undefined symbol
00001450  6E00 A8C4                822              BGT     .END
00001454                           823              
00001454                           824              ; IF D5>D0 MOUSE NOT INSIDE (IS ON THE RIGHT SIDE)
00001454  DA43                     825              ADD.W   D3,D5
00001456  B245                     826              CMP.W   D5,D1
Line 827 ERROR: Undefined symbol
00001458  6E00 A8BC                827              BGT     .END
0000145C                           828              
0000145C                           829              ;CALCULAR POS
0000145C  3039 00001BDA            830              MOVE.W  MOUY,D0                 ; COPY MOUSE Y POSITION
00001462  0440 009E                831              SUB.W   #GRDYOFF,D0
00001466  3239 00001BDC            832              MOVE.W  MOUX,D1                 ; COPY MOUSE X POSITION
0000146C  0441 0010                833              SUB.W   #GRDXOFF,D1
00001470  80FC 000C                834              DIVU.W  #GRDSZCEL,D0
00001474  82FC 000C                835              DIVU.W  #GRDSZCEL,D1
00001478                           836              
00001478  C0FC 0040                837              MULU.W  #GRDWIDTH,D0
0000147C  D041                     838              ADD.W   D1,D0
0000147E  3040                     839              MOVE.W  D0,A0
00001480                           840              
00001480  2279 00001C22            841              MOVE.L  GRDDST,A1
00001486                           842              
00001486                           843              ; COMPROBAR CLICK DER o IZQ
00001486  0839 0000 00001BDE       844              BTST    #0,MOUVAL
0000148E  6700 0006                845              BEQ     .CLICKDER
00001492  6000 0012                846              BRA     .CALP1P2
00001496                           847              
00001496  0839 0001 00001BDE       848  .CLICKDER   BTST    #1,MOUVAL
0000149E  6700 0074                849              BEQ     .FINN
000014A2  6000 0040                850              BRA     .CLRCELL
000014A6                           851              
Line 852 ERROR: Invalid syntax
000014A6                           852  .CALP1P2    MOVE.W  #(GRDWITH/2)-1,D2
000014A6  B242                     853              CMP.W   D2,D1
000014A8  6E00 0020                854              BGT     .PLAYER2
000014AC                           855              
Line 856 ERROR: Symbol value differs between first and second pass
000014AC                           856  .PLAYER1    CMP.B   #1,(A1,A0)              
000014AC  6700 0066                857              BEQ     .FINN
000014B0  5279 00002C26            858              ADD.W   #1,GRDNPLR1
000014B6  13BC 0001 8000           859              MOVE.B  #1,(A1,A0)
000014BC  6000 0056                860              BRA     .FINN
000014C0                           861              
Line 862 ERROR: Symbol value differs between first and second pass
000014C0                           862  .PLAYER2    CMP.B   #2,(A1,A0)              
000014C0  6700 0052                863              BEQ     .FINN
000014C4  5279 00002C28            864              ADD.W   #1,GRDNPLR2
000014CA  13BC 0002 8000           865              MOVE.B  #2,(A1,A0)
000014D0  6000 0042                866              BRA     .FINN
000014D4                           867           
Line 868 ERROR: Symbol value differs between first and second pass
000014D4                           868  .CLRCELL    CMP.B   #0,(A1,A0)              
Line 869 ERROR: Undefined symbol
000014D4  6700 A840                869              BEQ     .END
000014D8  0C31 0001 8000           870              CMP.B   #1,(A1,A0)
000014DE  6600 001E                871              BNE     .CLRP2
000014E2  5379 00002C26            872              SUB.W   #1,GRDNPLR1
Line 873 ERROR: Symbol value differs between first and second pass
000014E8                           873  .CLRP2      CMP.B   #2,(A1,A0)
000014E8  6600 0024                874              BNE     .SETZERO 
000014EC  5379 00002C28            875              SUB.W  #1,GRDNPLR2
000014F2                           876              
Line 877 ERROR: Symbol value differs between first and second pass
000014F2                           877  .SETZERO    MOVE.B  #0,(A1,A0) 
000014F2                           878                         
Line 879 ERROR: Symbol value differs between first and second pass
000014F2  4CDF 7FFF                879  .FINN       MOVEM.L (A7)+,D0-D7/A0-A6       
000014F6  4E75                     880              RTS
000014F8                           881  
000014F8                           882  ; -----------------------------------------------------------------------------
Line 883 ERROR: Symbol value differs between first and second pass
000014F8                           883  GRDRUPD
000014F8                           884  ; UPDATES THE GRID ACCORDING TO 2-PLAYER GAME OF LIFE RULES AS FOLLOWS:
000014F8                           885  ; * ADDS 1 TO THE NUMBER OF GENERATIONS (GRDNGEN)
000014F8                           886  ; * SWITCHES THE MATRIX POINTERS (GRDDST AND GRDSRC).
000014F8                           887  ; * CHECKS THE NEIGHBORS USING THE NEW SOURCE MATRIX (POINTER BY GRDDRC)
000014F8                           888  ; * THE RESULTS OF APPLYING THE RULES ARE WRITTEN INTO THE NEW DESTINATION
000014F8                           889  ;   MATRIX (POINTED BY GRDDST).
000014F8                           890  ; * THE RULES ARE THE FOLLOWING, WHERE P1 AND P2 ARE 1 AND 2 RESPECTIVELY,
000014F8                           891  ;   DEAD CELLS ARE REPRESENTED BY 0 AND NP1 AND NP2 DENOTE THE NUMBER OF
000014F8                           892  ;   PLAYER 1 AND PLAYER 2 NEIGHBORS RESPECTIVELY:
000014F8                           893  ;   + SURVIVAL RULES
000014F8                           894  ;     - IF CELL IS P1 AND NP1-NP2 IS 2 OR 3 -> NEW VALUE IS P1
000014F8                           895  ;     - IF CELL IS P1 AND NP1-NP2 IS 1 AND NP1>=2 -> NEW VALUE IS P1
000014F8                           896  ;     - OTHERWISE -> NEW VALUE IS 0
000014F8                           897  ;     - IF CELL IS P2 AND NP2-NP1 IS 2 OR 3 -> NEW VALUE IS P2
000014F8                           898  ;     - IF CELL IS P2 AND NP2-NP1 IS 1 AND NP2>=2 -> NEW VALUE IS P2
000014F8                           899  ;     - OTHERWISE -> NEW VALUE IS 0
000014F8                           900  ;   + BIRTH RULES
000014F8                           901  ;     - THE CELL HAS EXACTLY THREE P1 NEIGHBOURS AND THE NUMBER
000014F8                           902  ;       OF P2 NEIGHBOURS IS DIFFERENT FROM THREE. IN THIS CASE A
000014F8                           903  ;       P1 TOKEN IS BORN IN THE CELL.
000014F8                           904  ;     - THE CELL HAS EXACTLY THREE P2 NEIGHBOURS AND THE NUMBER
000014F8                           905  ;       OF P1 NEIGHBOURS IS DIFFERENT FROM THREE. IN THIS CASE A
000014F8                           906  ;       P2 TOKEN IS BORN IN THE CELL.
000014F8                           907  ;     - THE CELL HAS EXACTLY THREE WHITE AND THREE BLACK NEIGHBOURS.
000014F8                           908  ;       IN THIS CASE AN UNBIASED COIN DETERMINES WHETHER A WHITE OR
000014F8                           909  ;       BLACK TOKEN IS BORN IN THE CELL.
000014F8                           910  ; INPUT    : NONE
000014F8                           911  ; OUTPUT   : NONE
000014F8                           912  ; MODIFIES : NONE
000014F8                           913  ; -----------------------------------------------------------------------------
000014F8                           914  
000014F8                           915  ; TODO : PLACE YOUR CODE HERE
000014F8                           916  
000014F8  48E7 FFFE                917              MOVEM.L D0-D7/A0-A6,-(A7)
000014FC                           918  
000014FC                           919  
000014FC                           920          
000014FC                           921  
000014FC  4CDF 7FFF                922              MOVEM.L (A7)+,D0-D7/A0-A6       
00001500  4E75                     923              RTS
00001502                           924  
00001502                           925  ; -----------------------------------------------------------------------------
Line 926 ERROR: Symbol value differs between first and second pass
00001502                           926  GRDSAVE
00001502                           927  ; SAVES THE GRID INTO A FILE IN CSV FORMAT
00001502                           928  ; INPUT    : NONE
00001502                           929  ; OUTPUT   : NONE
00001502                           930  ; MODIFIES : NONE
00001502                           931  ; NOTE     : THE LOCAL BUFFER SIZE MUST BE MAX(512,2*GRDWIDTH+1). PLEASE CHANGE
00001502                           932  ;            IT ACCORDINGLY IF GRDWIDTH*2+1 IS LARGER THAN 512.
00001502                           933  ; -----------------------------------------------------------------------------
00001502  48E7 FFFE                934              MOVEM.L D0-D7/A0-A6,-(A7)       ; TO BE OPTIMIZED
00001506  103C 0032                935              MOVE.B  #50,D0                  ; CLOSE ALL FILES (RECOMMENDED)
0000150A  4E4F                     936              TRAP    #15
0000150C  9FFC 00000200            937              SUB.L   #512,A7                 ; ROW BUFFER IN LOCAL MEMORY
00001512  103C 003A                938              MOVE.B  #58,D0                  ; SHOW FILE DIALOG TASK
00001516  7201                     939              MOVE.L  #1,D1                   ; DISPLAY SAVE DIALOG
00001518  43F9 000015B0            940              LEA     .MSG,A1                 ; STANDARD MESSAGE
0000151E  45F9 000015CA            941              LEA     .FILTER,A2              ; NO FILTER
00001524  264F                     942              MOVE.L  A7,A3                   ; FILE NAME BUFFER
00001526  4253                     943              CLR.W   (A3)                    ; ENSURE THERE IS NO STRING
00001528  4E4F                     944              TRAP    #15
0000152A  4A01                     945              TST.B   D1
0000152C  6700 0076                946              BEQ     .END                    ; IF CANCELLED, DO NOTHING
00001530  224B                     947              MOVE.L  A3,A1                   ; PLACE THE FILENAME INTO A1
00001532  103C 0034                948              MOVE.B  #52,D0                  ; CREATE NEW FILE
00001536  4E4F                     949              TRAP    #15
00001538  4A40                     950              TST.W   D0                      ; CHECK CREATION ERROR
0000153A  6600 0068                951              BNE     .END                    ; DO NOTHING MORE IF ERROR
0000153E  2C4F                     952              MOVE.L  A7,A6                   ; PUT A6 INTO START OF BUFFER
00001540  224F                     953              MOVE.L  A7,A1                   ; PUT A1 INTO START OF BUFFER
00001542  2079 00001C22            954              MOVE.L  (GRDDST), A0            ; A0: POINTER TO THE DATA TO WRITE
00001548  363C 001F                955              MOVE.W  #GRDHEIGH-1,D3          ; D3: NUMBER OF ROWS - 1
Line 956 ERROR: Symbol value differs between first and second pass
0000154C                           956  .LOOPY      MOVE.W  #GRDWIDTH-1,D2          ; D2: NUMBER OF COLUMNS - 1
Line 957 ERROR: Symbol value differs between first and second pass
0000154C                           957  .LOOP       MOVE.B  #'0',D0                 ; ADD CHAR '0' AND THE CELL VALUE
0000154C  D018                     958              ADD.B   (A0)+,D0
0000154E  1CC0                     959              MOVE.B  D0, (A6)+               ; STORE IT IN THE BUFFER
00001550  1CFC 002C                960              MOVE.B  #',',(A6)+              ; NOW PUT THE COMMA
00001554  51CA 001C                961              DBRA.W  D2,.LOOP
00001558  1D7C 000D FFFF           962              MOVE.B  #$0D,-1(A6)             ; STORE CARRIAGE RETURN (REMOVE ',')
0000155E  1CBC 000A                963              MOVE.B  #$0A,(A6)               ; STORE LINE FEED
00001562  103C 0036                964              MOVE.B  #54,D0                  ; WRITE TO FILE TASK NUMBER
00001566  243C 00000081            965              MOVE.L  #GRDWIDTH*2+1,D2        ; NUMBER OF BYTES TO WRITE
0000156C  4E4F                     966              TRAP    #15                     ; WRITE (A1 IS ALREADY THERE)
0000156E  2C49                     967              MOVE.L  A1,A6                   ; GO BACK TO THE BUFFER START
00001570  51CB FFFC                968              DBRA.W  D3,.LOOPY
00001574  103C 0038                969              MOVE.B  #56,D0                  ; CLOSE FILE
00001578  4E4F                     970              TRAP    #15
Line 971 ERROR: Symbol value differs between first and second pass
0000157A                           971  .END        ADD.L   #512,A7                 ; RESTORE STACK
0000157A  4CDF 7FFF                972              MOVEM.L (A7)+,D0-D7/A0-A6       ; TO BE OPTIMIZED
0000157E  4E75                     973              RTS
Line 974 ERROR: Symbol value differs between first and second pass
00001580= 53 45 4C 45 43 54 ...    974  .MSG        DC.B    'SELECT A CSV FILE TO SAVE',0
Line 975 ERROR: Symbol value differs between first and second pass
00001599= 2A 2E 43 53 56           975  .FILTER     DC.B    '*.CSV',0
0000159E                           976              DS.W    0
0000159E                           977  
0000159E                           978  ; -----------------------------------------------------------------------------
Line 979 ERROR: Symbol value differs between first and second pass
0000159E                           979  GRDLOAD
0000159E                           980  ; LOADS THE GRID FROM A CSV FORMATTED FILE
0000159E                           981  ; INPUT    : NONE
0000159E                           982  ; OUTPUT   : NONE
0000159E                           983  ; MODIFIES : NONE
0000159E                           984  ; NOTE     : THE LOCAL BUFFER SIZE MUST BE MAX(512,2*GRDWIDTH+1). PLEASE CHANGE
0000159E                           985  ;            IT ACCORDINGLY IF GRDWIDTH*2+1 IS LARGER THAN 512.
0000159E                           986  ; -----------------------------------------------------------------------------
0000159E  48E7 FFFE                987              MOVEM.L D0-D7/A0-A6,-(A7)       ; TO BE OPTIMIZED
000015A2  103C 0032                988              MOVE.B  #50,D0                  ; CLOSE ALL FILES (RECOMMENDED)
000015A6  4E4F                     989              TRAP    #15
000015A8  9FFC 00000200            990              SUB.L   #512,A7                 ; ROW BUFFER IN LOCAL MEMORY
000015AE  103C 003A                991              MOVE.B  #58,D0                  ; SHOW FILE DIALOG TASK
000015B2  4281                     992              CLR.L   D1                      ; DISPLAY LOAD DIALOG
000015B4  43F9 00001650            993              LEA     .MSG,A1                 ; STANDARD MESSAGE
000015BA  45F9 0000166A            994              LEA     .FILTER,A2              ; NO FILTER
000015C0  264F                     995              MOVE.L  A7,A3                   ; FILE NAME BUFFER
000015C2  4253                     996              CLR.W   (A3)                    ; ENSURE THERE IS NO STRING
000015C4  4E4F                     997              TRAP    #15
000015C6  4A01                     998              TST.B   D1
000015C8  6700 007A                999              BEQ     .END                    ; IF CANCELLED, DO NOTHING
000015CC  224B                    1000              MOVE.L  A3,A1                   ; PLACE THE FILENAME INTO A1
000015CE  103C 0033               1001              MOVE.B  #51,D0                  ; OPEN EXISTING FILE
000015D2  4E4F                    1002              TRAP    #15
000015D4  4A40                    1003              TST.W   D0                      ; CHECK ERRORS
000015D6  6600 006C               1004              BNE     .END                    ; IF ERRORS, DO NOTHING MORE
000015DA  2C4F                    1005              MOVE.L  A7,A6                   ; PUT A6 INTO START OF BUFFER
000015DC  224F                    1006              MOVE.L  A7,A1                   ; PUT A1 INTO START OF BUFFER
000015DE  2079 00001C22           1007              MOVE.L  (GRDDST), A0            ; POINTER TO STORE PROCESS. DATA
000015E4  363C 001F               1008              MOVE.W  #GRDHEIGH-1,D3
Line 1009 ERROR: Symbol value differs between first and second pass
000015E8                          1009  .LOOP       MOVE.L  A6,A1
000015E8  103C 0035               1010              MOVE.B  #53,D0                  ; READ DATA TASK NUMBER
000015EC  243C 00000081           1011              MOVE.L  #GRDWIDTH*2+1,D2        ; NUMBER OF BYTES TO READ
000015F2  4E4F                    1012              TRAP    #15                     ; READ THE DATA
000015F4  343C 003F               1013              MOVE.W  #GRDWIDTH-1,D2
Line 1014 ERROR: Symbol value differs between first and second pass
000015F8                          1014  .COPY       MOVE.B  (A1)+,D0                ; PICK ONE LOADED CHARACTER
000015F8  0400 0030               1015              SUB.B   #'0',D0                 ; CONVERT FROM ASCII TO NUMBER
000015FC  10C0                    1016              MOVE.B  D0,(A0)+                ; STORE DATA
000015FE  5289                    1017              ADDQ.L  #1,A1                   ; SKIP THE COMMA
00001600  51CA 002A               1018              DBRA.W  D2,.COPY
00001604  51CB 0014               1019              DBRA.W  D3,.LOOP
00001608  103C 0038               1020              MOVE.B  #56,D0                  ; CLOSE FILE
0000160C  4E4F                    1021              TRAP    #15
Line 1022 ERROR: Symbol value differs between first and second pass
0000160E                          1022  .END        ADD.L   #512,A7                 ; RESTORE STACK
0000160E  4CDF 7FFF               1023              MOVEM.L (A7)+,D0-D7/A0-A6       ; TO BE OPTIMIZED
00001612  4E75                    1024              RTS
Line 1025 ERROR: Symbol value differs between first and second pass
00001614= 53 45 4C 45 43 54 ...   1025  .MSG        DC.B    'SELECT A CSV FILE TO LOAD',0
Line 1026 ERROR: Symbol value differs between first and second pass
0000162D= 2A 2E 43 53 56          1026  .FILTER     DC.B    '*.CSV',0
00001632                          1027              DS.W    0
00001632                          1028  
00001632                          1029  ; -----------------------------------------------------------------------------
Line 1030 ERROR: Symbol value differs between first and second pass
00001632                          1030  GRDLLEFT
00001632                          1031  ; LOADS THE LEFT PART OF THE GRID FROM A CSV FORMATTED FILE
00001632                          1032  ; INPUT    : NONE
00001632                          1033  ; OUTPUT   : NONE
00001632                          1034  ; MODIFIES : NONE
00001632                          1035  ; NOTE     : THE LOCAL BUFFER SIZE MUST BE MAX(512,2*GRDWIDTH+1). PLEASE CHANGE
00001632                          1036  ;            IT ACCORDINGLY IF GRDWIDTH*2+1 IS LARGER THAN 512.
00001632                          1037  ; NOTE     : ALL THE ACTIVE CELLS ARE STORED AS PLAYER 1 INDEPENDLY OF THEIR
00001632                          1038  ;            ACTUAL VALUE.
00001632                          1039  ; -----------------------------------------------------------------------------
00001632                          1040  
00001632                          1041  ; TODO : PLACE YOUR CODE HERE
00001632                          1042  
00001632  48E7 FFFE               1043              MOVEM.L D0-D7/A0-A6,-(A7)       ; SAVE CONTENT REGISTERS
00001636                          1044              
00001636  103C 0032               1045              MOVE.B  #50,D0                  ; CLOSE ALL FILES (RECOMMENDED)
0000163A  4E4F                    1046              TRAP    #15
0000163C  9FFC 00000200           1047              SUB.L   #512,A7                 ; ROW BUFFER IN LOCAL MEMORY
00001642  103C 003A               1048              MOVE.B  #58,D0                  ; SHOW FILE DIALOG TASK
00001646  4281                    1049              CLR.L   D1                      ; DISPLAY LOAD DIALOG
00001648  43F9 000016FC           1050              LEA     .MSG,A1                 ; STANDARD MESSAGE
0000164E  45F9 00001716           1051              LEA     .FILTER,A2              ; NO FILTER
00001654  264F                    1052              MOVE.L  A7,A3                   ; FILE NAME BUFFER
00001656  4253                    1053              CLR.W   (A3)                    ; ENSURE THERE IS NO STRING
00001658  4E4F                    1054              TRAP    #15
0000165A  4A01                    1055              TST.B   D1
0000165C  6700 0092               1056              BEQ     .END                    ; IF CANCELLED, DO NOTHING
00001660  224B                    1057              MOVE.L  A3,A1                   ; PLACE THE FILENAME INTO A1
00001662  103C 0033               1058              MOVE.B  #51,D0                  ; OPEN EXISTING FILE
00001666  4E4F                    1059              TRAP    #15
00001668  4A40                    1060              TST.W   D0                      ; CHECK ERRORS
0000166A  6600 0084               1061              BNE     .END                    ; IF ERRORS, DO NOTHING MORE
0000166E  2C4F                    1062              MOVE.L  A7,A6                   ; PUT A6 INTO START OF BUFFER
00001670  224F                    1063              MOVE.L  A7,A1                   ; PUT A1 INTO START OF BUFFER
00001672  2079 00001C22           1064              MOVE.L  (GRDDST), A0            ; POINTER TO STORE PROCESS. DATA
00001678  363C 001F               1065              MOVE.W  #GRDHEIGH-1,D3
Line 1066 ERROR: Symbol value differs between first and second pass
0000167C                          1066  .LOOP       MOVE.L  A6,A1
0000167C  103C 0035               1067              MOVE.B  #53,D0                  ; READ DATA TASK NUMBER
00001680  243C 00000081           1068              MOVE.L  #GRDWIDTH*2+1,D2        ; NUMBER OF BYTES TO READ
00001686  4E4F                    1069              TRAP    #15                     ; READ THE DATA
00001688                          1070              ;En teora llega hasta la mitad de las casillas y se renicia
00001688                          1071              ;para la siguiente fila
00001688  343C 001F               1072              MOVE.W  #(GRDWIDTH/2)-1,D2      ; COPY HALF OF GRID
Line 1073 ERROR: Symbol value differs between first and second pass
0000168C                          1073  .COPY       MOVE.B  (A1)+,D0                ; PICK ONE LOADED CHARACTER
0000168C  0400 0030               1074              SUB.B   #'0',D0                 ; CONVERT FROM ASCII TO NUMBER
00001690  B07C 0002               1075              CMP.W   #2,D0
00001694  6600 0048               1076              BNE     .STORE
00001698  303C 0001               1077              MOVE.W  #1,D0
Line 1078 ERROR: Symbol value differs between first and second pass
0000169C                          1078  .STORE      MOVE.B  D0,(A0)+                ; STORE DATA
0000169C  5289                    1079              ADDQ.L  #1,A1                   ; SKIP THE COMMA
0000169E  51CA 002C               1080              DBRA.W  D2,.COPY
000016A2  51CB 0016               1081              DBRA.W  D3,.LOOP
000016A6  103C 0038               1082              MOVE.B  #56,D0                  ; CLOSE FILE
000016AA  4E4F                    1083              TRAP    #15
Line 1084 ERROR: Symbol value differs between first and second pass
000016AC                          1084  .END        ADD.L   #512,A7                 ; RESTORE STACK
000016AC                          1085              
000016AC  4CDF 7FFF               1086              MOVEM.L (A7)+,D0-D7/A0-A6       ; RESTORES CONTENT REGISTERS
000016B0  4E75                    1087              RTS
000016B2                          1088  
Line 1089 ERROR: Symbol value differs between first and second pass
000016B2= 53 45 4C 45 43 54 ...   1089  .MSG        DC.B    'SELECT A CSV FILE TO LOAD',0
Line 1090 ERROR: Symbol value differs between first and second pass
000016CB= 2A 2E 43 53 56          1090  .FILTER     DC.B    '*.CSV',0
000016D0                          1091              DS.W    0
000016D0                          1092  
000016D0                          1093  ; -----------------------------------------------------------------------------
Line 1094 ERROR: Symbol value differs between first and second pass
000016D0                          1094  GRDLRGT
000016D0                          1095  ; LOADS THE RIGHT PART OF THE GRID FROM A CSV FORMATTED FILE
000016D0                          1096  ; INPUT    : NONE
000016D0                          1097  ; OUTPUT   : NONE
000016D0                          1098  ; MODIFIES : NONE
000016D0                          1099  ; NOTE     : THE LOCAL BUFFER SIZE MUST BE MAX(512,2*GRDWIDTH+1). PLEASE CHANGE
000016D0                          1100  ;            IT ACCORDINGLY IF GRDWIDTH*2+1 IS LARGER THAN 512.
000016D0                          1101  ; NOTE     : ALL THE ACTIVE CELLS ARE STORED AS PLAYER 2 INDEPENDLY OF THEIR
000016D0                          1102  ;            ACTUAL VALUE.
000016D0                          1103  ; -----------------------------------------------------------------------------
000016D0                          1104  
000016D0                          1105  ; TODO : PLACE YOUR CODE HERE
000016D0                          1106  
000016D0  48E7 FFFE               1107              MOVEM.L D0-D7/A0-A6,-(A7)       ; SAVE CONTENT REGISTERS
000016D4                          1108  
000016D4  103C 0032               1109              MOVE.B  #50,D0                  ; CLOSE ALL FILES (RECOMMENDED)
000016D8  4E4F                    1110              TRAP    #15
000016DA  9FFC 00000200           1111              SUB.L   #512,A7                 ; ROW BUFFER IN LOCAL MEMORY
000016E0  103C 003A               1112              MOVE.B  #58,D0                  ; SHOW FILE DIALOG TASK
000016E4  4281                    1113              CLR.L   D1                      ; DISPLAY LOAD DIALOG
000016E6  43F9 000017AE           1114              LEA     .MSG,A1                 ; STANDARD MESSAGE
000016EC  45F9 000017C8           1115              LEA     .FILTER,A2              ; NO FILTER
000016F2  264F                    1116              MOVE.L  A7,A3                   ; FILE NAME BUFFER
000016F4  4253                    1117              CLR.W   (A3)                    ; ENSURE THERE IS NO STRING
000016F6  4E4F                    1118              TRAP    #15
000016F8  4A01                    1119              TST.B   D1
000016FA  6700 00A6               1120              BEQ     .END                    ; IF CANCELLED, DO NOTHING
000016FE  224B                    1121              MOVE.L  A3,A1                   ; PLACE THE FILENAME INTO A1
00001700  103C 0033               1122              MOVE.B  #51,D0                  ; OPEN EXISTING FILE
00001704  4E4F                    1123              TRAP    #15
00001706  4A40                    1124              TST.W   D0                      ; CHECK ERRORS
00001708  6600 0098               1125              BNE     .END                    ; IF ERRORS, DO NOTHING MORE
0000170C  2C4F                    1126              MOVE.L  A7,A6                   ; PUT A6 INTO START OF BUFFER
0000170E  224F                    1127              MOVE.L  A7,A1                   ; PUT A1 INTO START OF BUFFER
00001710  2079 00001C22           1128              MOVE.L  (GRDDST), A0            ; POINTER TO STORE PROCESS. DATA
00001716  363C 001F               1129              MOVE.W  #GRDHEIGH-1,D3
Line 1130 ERROR: Symbol value differs between first and second pass
0000171A                          1130  .LOOP       MOVE.L  A6,A1
0000171A  103C 0035               1131              MOVE.B  #53,D0                  ; READ DATA TASK NUMBER
0000171E  243C 00000081           1132              MOVE.L  #GRDWIDTH*2+1,D2        ; NUMBER OF BYTES TO READ
00001724  4E4F                    1133              TRAP    #15                     ; READ THE DATA
00001726                          1134              ;En teora llega hasta la mitad de las casillas y se renicia
00001726                          1135              ;para la siguiente fila
00001726  343C 001F               1136              MOVE.W  #(GRDWIDTH/2)-1,D2      ; COPY HALF OF GRID
0000172A                          1137              ;En teora si se empieza a guadar desde la mitad, se tendra que guardar
0000172A                          1138              ;la parte derecha del grid, es decir, por cada fila sse tiene que empezar
0000172A                          1139              ;por la mitad y para ello sumando la mitad del grid a donde se guarda 
0000172A                          1140              ;tendra que funcionar
0000172A  D0C2                    1141              ADD.W   D2,A0
0000172C  D2FC 0040               1142              ADD.W   #GRDWIDTH,A1            ; A1 contiene el doble por las comas
Line 1143 ERROR: Symbol value differs between first and second pass
00001730                          1143  .COPY       MOVE.B  (A1)+,D0                ; PICK ONE LOADED CHARACTER
00001730  0400 0030               1144              SUB.B   #'0',D0                 ; CONVERT FROM ASCII TO NUMBER
00001734  B07C 0001               1145              CMP.W   #1,D0
00001738  6600 0056               1146              BNE     .STORE
0000173C  303C 0002               1147              MOVE.W  #2,D0
Line 1148 ERROR: Symbol value differs between first and second pass
00001740                          1148  .STORE      MOVE.B  D0,(A0)+                ; STORE DATA
00001740  5289                    1149              ADDQ.L  #1,A1                   ; SKIP THE COMMA
00001742  51CA 003A               1150              DBRA.W  D2,.COPY
00001746  51CB 001E               1151              DBRA.W  D3,.LOOP
0000174A  103C 0038               1152              MOVE.B  #56,D0                  ; CLOSE FILE
0000174E  4E4F                    1153              TRAP    #15
Line 1154 ERROR: Symbol value differs between first and second pass
00001750                          1154  .END        ADD.L   #512,A7                 ; RESTORE STACK
00001750                          1155              
00001750                          1156              
00001750  4CDF 7FFF               1157              MOVEM.L (A7)+,D0-D7/A0-A6       ; RESTORES CONTENT REGISTERS
00001754  4E75                    1158              RTS
00001756                          1159  
Line 1160 ERROR: Symbol value differs between first and second pass
00001756= 53 45 4C 45 43 54 ...   1160  .MSG        DC.B    'SELECT A CSV FILE TO LOAD',0
Line 1161 ERROR: Symbol value differs between first and second pass
0000176F= 2A 2E 43 53 56          1161  .FILTER     DC.B    '*.CSV',0
00001774                          1162              DS.W    0
00001774                          1163  
00001774                          1164  ; -----------------------------------------------------------------------------
Line 1165 ERROR: Symbol value differs between first and second pass
00001774                          1165  GRDPLOT
00001774                          1166  ; PLOTS THE GRID
00001774                          1167  ; INPUT    : NONE
00001774                          1168  ; OUTPUT   : NONE
00001774                          1169  ; MODIFIES : NONE
00001774                          1170  ; -----------------------------------------------------------------------------
00001774                          1171  
00001774                          1172  ; TODO : PLACE YOUR CODE HERE
00001774                          1173  SETCURSOR   MACRO
00001774                          1174              CLR.L   D1
00001774                          1175              MOVE.B  #11,D0                  
00001774                          1176              MOVE.B  #\1,D1
00001774                          1177              LSL     #8,D1
00001774                          1178              MOVE.B  #\2,D1 
00001774                          1179              TRAP    #15
00001774                          1180              ENDM
00001774                          1181              
00001774                          1182  SETFLLCLR   MACRO
00001774                          1183              CLR.L   D1
00001774                          1184              MOVE.B  #81,D0                  
00001774                          1185              MOVE.L  #\1,D1
00001774                          1186              TRAP    #15
00001774                          1187              ENDM
00001774                          1188              
00001774                          1189  SETNUMBER   MACRO
00001774                          1190              CLR.L   D1
00001774                          1191              MOVE.B  #3,D0
00001774                          1192              MOVE.W  \1,D1                  
00001774                          1193              TRAP    #15
00001774                          1194              ENDM
00001774                          1195              
00001774                          1196  SETPENCLR   MACRO
00001774                          1197              CLR.L   D1
00001774                          1198              MOVE.B  #80,D0
00001774                          1199              MOVE.L  #\1,D1
00001774                          1200              TRAP    #15
00001774                          1201              ENDM
00001774                          1202              
00001774                          1203  PRINTCHAR   MACRO
00001774                          1204              MOVE.B  #6,D0                   ; TASK ID TO PRINT A CHARACTER
00001774                          1205              MOVE.B  #'*',D1                 ; CHARACTER TO PRINT
00001774                          1206              TRAP    #15                     ; PRINT
00001774                          1207              ENDM
00001774                          1208  
00001774  48E7 FFFE               1209              MOVEM.L D0-D7/A0-A6,-(A7)       ; SAVE CONTENT REGISTERS
00001778                          1210              
00001778                          1211              
00001778                          1212  
00001778                          1213              ;RECORRER MATRIZ E IR PINTADO
00001778                          1214              ; SET PEN WIDTH/THICKNESS
00001778  103C 005D               1215              MOVE.B  #93,D0
0000177C  7202                    1216              MOVE.L  #2,D1
0000177E  4E4F                    1217              TRAP    #15
00001780  3C3C 001F               1218              MOVE.W  #GRDHEIGH-1,D6
00001784  3E3C 003F               1219              MOVE.W  #GRDWIDTH-1,D7
00001788  4286                    1220              CLR.L   D6
0000178A  4287                    1221              CLR.L   D7
0000178C                          1222              ; DRAW CELLS COLORS
0000178C  2079 00001C22           1223              MOVE.L  (GRDDST), A0 
00001792  3C3C 0000               1224              MOVE.W  #0,D6
Line 1225 ERROR: Symbol value differs between first and second pass
00001796                          1225  .ROWS       CMP.W   #GRDHEIGH-1,D6
00001796  6700 00E0               1226              BEQ     .FINFOR1
0000179A  3E3C 0000               1227              MOVE.W  #0,D7   
Line 1228 ERROR: Symbol value differs between first and second pass
0000179E                          1228  .CLMS       CMP.W   #GRDWIDTH-1,D7
0000179E  6700 00D2               1229              BEQ     .FINFOR2
000017A2                          1230              ;
000017A2  3406                    1231              MOVE.W  D6,D2
000017A4  3207                    1232              MOVE.W  D7,D1
000017A6  1A18                    1233              MOVE.B  (A0)+,D5
000017A8  BA3C 0000               1234              CMP.B   #0,D5
000017AC  6700 008C               1235              BEQ     .VACIA
000017B0  BA3C 0001               1236              CMP.B   #1,D5
000017B4  6700 0076               1237              BEQ     .P1
000017B8                          1238              ; CASILLA ROJA
000017B8                          1239m             SETFLLCLR CLRLTRED
000017C6  6000 007C               1240              BRA.W   .PAINT
Line 1241 ERROR: Symbol value differs between first and second pass
000017CA                          1241  .P1         ; CASILLA AZUL
000017CA                          1242m             SETFLLCLR CLRLTBLU
Line 1243 ERROR: Symbol value differs between first and second pass
000017D8                          1243  .VACIA      ; FONDO NEGRO
000017D8                          1244m             SETFLLCLR CLRBLACK
Line 1245 ERROR: Symbol value differs between first and second pass
000017E2                          1245  .PAINT      CLR.L   D1
000017E2  1207                    1246              MOVE.B  D7,D1
000017E4  C2FC 000C               1247              MULU    #GRDSZCEL,D1
000017E8  0641 0010               1248              ADD.W   #GRDXOFF,D1
000017EC  3601                    1249              MOVE.W  D1,D3
000017EE  0643 000C               1250              ADD.W   #GRDSZCEL,D3
000017F2  3406                    1251              MOVE.W  D6,D2
000017F4  C4FC 000C               1252              MULU    #GRDSZCEL,D2
000017F8  0642 009E               1253              ADD.W   #GRDYOFF,D2
000017FC  3802                    1254              MOVE.W  D2,D4
000017FE  0644 000C               1255              ADD.W   #GRDSZCEL,D4
00001802                          1256              
00001802  103C 0057               1257              MOVE.B  #87,D0
00001806  4E4F                    1258              TRAP    #15
00001808                          1259              ;
00001808  5247                    1260              ADDQ.W  #1,D7
0000180A  6000 FFF0               1261              BRA.W   .CLMS
Line 1262 ERROR: Symbol value differs between first and second pass
0000180E                          1262  .FINFOR2    ADDQ.W  #1,D6
0000180E  6000 FFE0               1263              BRA.W   .ROWS
Line 1264 ERROR: Symbol value differs between first and second pass
00001812                          1264  .FINFOR1    ;YA ESTA :D        
00001812                          1265              
00001812                          1266              ;SCORES
00001812                          1267              ; DRAW *
00001812  3439 00002C26           1268              MOVE.W  (GRDNPLR1),D2
00001818  3639 00002C28           1269              MOVE.W  (GRDNPLR2),D3
0000181E  B642                    1270              CMP.W   D2,D3 
00001820  6700 00B4               1271              BEQ     .EQUALS
00001824  6E00 008C               1272              BGT     .P2MRSCR                ; PLAYER1<PLAYER2
00001828                          1273m             SETCURSOR GRDSCP1X,GRDSCP1Y-1   ; SET CURSOR
0000183A                          1274m             SETFLLCLR CLRLTBLU              ; SET FILL COLOR
00001848  6000 00E0               1275              BRA     .EXIT
0000184C                          1276m .P2MRSCR    SETCURSOR GRDSCP2X,GRDSCP2Y-1   ; SET CURSOR
Line 1277 ERROR: Symbol value differs between first and second pass
0000185E                          1277              ENDM
0000185E                          1278m             SETFLLCLR CLRLTRED              ; SET FILL COLOR
0000186C  6000 00BC               1279              BRA     .EXIT
00001870                          1280m .EQUALS     SETCURSOR GRDSCP1X,GRDSCP1Y-1   ; SET CURSOR
Line 1281 ERROR: Symbol value differs between first and second pass
00001882                          1281              ENDM
00001882                          1282m             SETFLLCLR CLRLTBLU              ; SET FILL COLOR
00001890                          1283m             PRINTCHAR
0000189A                          1284m             SETCURSOR GRDSCP2X,GRDSCP2Y-1   ; SET CURSOR
000018AC                          1285m             SETFLLCLR CLRLTRED              ; SET FILL COLOR
000018BA                          1286m             PRINTCHAR
Line 1287 ERROR: Symbol value differs between first and second pass
000018C4                          1287  .EXIT       ;PLAYER SCORES
000018C4                          1288m             SETPENCLR CLRWHITE              ; SET PEN COLOR       
000018D2                          1289              ; PLAYER 1
000018D2                          1290m             SETCURSOR GRDSCP1X,GRDSCP1Y     ; SET CURSOR
000018E4                          1291m             SETFLLCLR CLRLTBLU              ; SET FILL COLOR
000018F2                          1292m             SETNUMBER D2                    ; WRITE NUMBER
000018FC                          1293              
000018FC                          1294              ; GENERATIONS
000018FC                          1295m             SETCURSOR GRDSCNGX,GRDSCNGY     ; SET CURSOR
0000190E                          1296m             SETFLLCLR CLRLTGRN              ; SET FILL COLOR
0000191C                          1297m             SETNUMBER (GRDNGEN)             ; WRITE NUMBER
0000192A                          1298  
0000192A                          1299              ; PLAYER 2
0000192A                          1300m             SETCURSOR GRDSCP2X,GRDSCP2Y     ; SET CURSOR
0000193C                          1301m             SETFLLCLR CLRLTRED              ; SET FILL COLOR
0000194A                          1302m             SETNUMBER D3                    ; WRITE NUMBER
00001954                          1303              
00001954                          1304              ;GRID
00001954                          1305m             SETPENCLR CLRDKGRN              ; SET PEN COLOR
00001962                          1306              
00001962                          1307              ; DRAW LINES
00001962  103C 0054               1308              MOVE.B  #84,D0
00001966                          1309              
00001966                          1310              ; VERTICAL                       
00001966  3A3C 0040               1311              MOVE.W  #GRDWIDTH,D5
0000196A  323C 0010               1312              MOVE.W  #GRDXOFF,D1             ; X1
0000196E  343C 009E               1313              MOVE.W  #GRDYOFF,D2             ; Y1
00001972  363C 0010               1314              MOVE.W  #GRDXOFF,D3             ; X2
00001976  383C 0180               1315              MOVE.W  #GRDPXHEI,D4
0000197A  D842                    1316              ADD.W   D2,D4                   ; Y2
0000197C                          1317              
Line 1318 ERROR: Symbol value differs between first and second pass
0000197C                          1318  .LNVRTCL    TRAP    #15
0000197C  0641 000C               1319              ADD.W   #GRDSZCEL,D1
00001980  3601                    1320              MOVE.W  D1,D3               
00001982  51CD 005E               1321              DBRA.W  D5,.LNVRTCL
00001986                          1322              
00001986                          1323              ; HORIZONTAL
00001986  3A3C 0020               1324              MOVE.W  #GRDHEIGH,D5
0000198A  323C 0010               1325              MOVE.W  #GRDXOFF,D1             ; X1 (Y1 SAME AS VERTICAL)
0000198E  363C 0300               1326              MOVE.W  #GRDPXWID,D3
00001992  D641                    1327              ADD.W   D1,D3                   ; X2
00001994  383C 009E               1328              MOVE.W  #GRDYOFF,D4             ; Y2
00001998                          1329              
Line 1330 ERROR: Symbol value differs between first and second pass
00001998                          1330  .LNHRZNTL   TRAP    #15           
00001998  0642 000C               1331              ADD.W   #GRDSZCEL,D2
0000199C  3802                    1332              MOVE.W  D2,D4
0000199E  51CD 0060               1333              DBRA.W  D5,.LNHRZNTL
000019A2                          1334              
000019A2  4CDF 7FFF               1335              MOVEM.L (A7)+,D0-D7/A0-A6       ; RESTORE CONTENT REGISTERS
000019A6                          1336       
000019A6  4E75                    1337              RTS
000019A8                          1338  
000019A8                          1339  
000019A8                          1340  
000019A8                          1341  
000019A8                          1342  
000019A8                          1343  
000019A8                          1344  
000019A8                          1345  
000019A8                          1346  
000019A8                          1347  
000019A8                          1348  
000019A8                          1349  
000019A8                          1350  
000019A8                          1351  
000019A8                          1352  
000019A8                          1353  
000019A8                          1354  
000019A8                          1355  
000019A8                          1356  
000019A8                          1357  
000019A8                          1358  
000019A8                          1359  
000019A8                          1360  
000019A8                          1361  
000019A8                          1362  
000019A8                          1363  
000019A8                          1364  
000019A8                          1365  
000019A8                          1366  
000019A8                          1367  
000019A8                          1368  
000019A8                          1369  
000019A8                          1370  
000019A8                          1371  
000019A8                          1372  
000019A8                          1373  
000019A8                          1374  
000019A8                          1375  
000019A8                          1376  
000019A8                          1377  
000019A8                          1378  
000019A8                          1379  
000019A8                          1380  -------------------- end include --------------------
000019A8                          1381              INCLUDE "GOL.X68"               ; GAME OF LIFE APPLICATION
000019A8                          1382  ; =============================================================================
000019A8                          1383  ; TITLE    : GAME OF LIFE APPLICATION
000019A8                          1384  ; AUTHOR   : ANTONI BURGUERA
000019A8                          1385  ; HISTORY  : 05-JULY-2021 - CREATION
000019A8                          1386  ; COMMENTS : THIS IS AN APPLICATION. SO, IT IMPLEMENTS INITIALIZATION, UPDATE
000019A8                          1387  ;            AND PLOT, AS WELL AS SOME AUXILIARY SUBROUTINES.
000019A8                          1388  ; =============================================================================
000019A8                          1389  
000019A8                          1390  ; -----------------------------------------------------------------------------
Line 1391 ERROR: Symbol value differs between first and second pass
000019A8                          1391  GOLINIT
000019A8                          1392  ; INITIALIZE GAME OF LIFE APPLICATION AS FOLLOWS:
000019A8                          1393  ; * MAKES THE INTERNAL STATE TO BE "PAUSED/STOPPED"
000019A8                          1394  ; * INITIALIZES THE USER INTERFACE (BY INITIALIZING THE BUTTONS LIST AND
000019A8                          1395  ;   ADDING BUTTONS INTO IT)
000019A8                          1396  ; * INITIALIZES THE GRID.
000019A8                          1397  ; * INITIALIZES THE UTILITY CODE.
000019A8                          1398  ; INPUT    : NONE
000019A8                          1399  ; OUTPUT   : NONE
000019A8                          1400  ; MODIFIES : NONE
000019A8                          1401  ; -----------------------------------------------------------------------------
000019A8  48E7 FFFE               1402              MOVEM.L D0-D7/A0-A6,-(A7)
000019AC  13FC 0000 00002C2C      1403              MOVE.B  #GOLSPAUS,(GOLSTATE)
000019B4  4EB8 1346               1404              JSR     BTLINIT
000019B8  41F9 00001A48           1405              LEA     .SDBLIST,A0
Line 1406 ERROR: Symbol value differs between first and second pass
000019BE                          1406  .LOOP       MOVE.L  (A0)+,A1
000019BE  B3FC FFFFFFFF           1407              CMP.L   #-1,A1
000019C4  6700 0074               1408              BEQ     .END
000019C8  4EB8 1366               1409              JSR     BTLADD
000019CC  605A                    1410              BRA     .LOOP
Line 1411 ERROR: Symbol value differs between first and second pass
000019CE                          1411  .END        JSR     GRDINIT
000019CE  4EB8 10D0               1412              JSR     UTLINIT
000019D2  4CDF 7FFF               1413              MOVEM.L (A7)+,D0-D7/A0-A6
000019D6  4E75                    1414              RTS
Line 1415 ERROR: Symbol value differs between first and second pass
000019D8=                         1415  .SDBLIST    DC.L    GOLCLRBT,GOLRUNBT,GOLSTPBT,GOLSTEBT,GOLLLFBT,GOLLRTBT
000019D8= 00001B98 00001BAE ...   1416              DC.L    GOLLOABT,GOLSAVBT,-1
000019E4                          1417  
000019E4                          1418  ; -----------------------------------------------------------------------------
Line 1419 ERROR: Symbol value differs between first and second pass
000019E4                          1419  GOLUPD
000019E4                          1420  ; UPDATE GAME OF LIFE APPLICATION AS FOLLOWS:
000019E4                          1421  ; * UPDATES THE BUTTON LIST
000019E4                          1422  ; * EXECUTES CODE DEPENDING ON THE CURRENT APPLICATION STATE.
000019E4                          1423  ; INPUT    : NONE
000019E4                          1424  ; OUTPUT   : NONE
000019E4                          1425  ; MODIFIES : NONE
000019E4                          1426  ; -----------------------------------------------------------------------------
000019E4  48E7 C0C0               1427              MOVEM.L A0-A1/D0-D1,-(A7)
000019E8  4EB8 1390               1428              JSR     BTLUPD
000019EC  41F9 00001A90           1429              LEA     .JMPTBL,A0
000019F2  4280                    1430              CLR.L   D0
000019F4  1039 00002C2C           1431              MOVE.B  (GOLSTATE),D0
000019FA  E508                    1432              LSL.B   #2,D0
000019FC  2070 0000               1433              MOVE.L  (A0,D0),A0
00001A00  4E90                    1434              JSR     (A0)
00001A02  4CDF 0303               1435              MOVEM.L (A7)+,A0-A1/D0-D1
00001A06  4E75                    1436              RTS
Line 1437 ERROR: Symbol value differs between first and second pass
00001A08=                         1437  .JMPTBL     DC.L    GRDMUPD,GOLDORUN
00001A08                          1438  
00001A08                          1439  ; -----------------------------------------------------------------------------
Line 1440 ERROR: Symbol value differs between first and second pass
00001A08                          1440  GOLPLOT
00001A08                          1441  ; PLOTS THE APPLICATION BY CALLING BTLPLOT AND GRDPLOT
00001A08                          1442  ; INPUT    : NONE
00001A08                          1443  ; OUTPUT   : NONE
00001A08                          1444  ; MODIFIES : NONE
00001A08                          1445  ; -----------------------------------------------------------------------------
00001A08  4EB8 13B8               1446              JSR     BTLPLOT
00001A0C  4EF8 17CE               1447              JMP     GRDPLOT
00001A10                          1448  
00001A10                          1449  ; -----------------------------------------------------------------------------
Line 1450 ERROR: Symbol value differs between first and second pass
00001A10                          1450  GOLDORUN
00001A10                          1451  ; EXECUTES THE RUN STATE. IT ALSO CHECKS IF THE MAXIMUM NUMBER OF GENERATIONS
00001A10                          1452  ; IS REACHED AND, IF SO, ANNOUNCES THE WINNER.
00001A10                          1453  ; INPUT    : NONE
00001A10                          1454  ; OUTPUT   : NONE
00001A10                          1455  ; MODIFIES : NONE
00001A10                          1456  ; -----------------------------------------------------------------------------
00001A10  48E7 8040               1457              MOVEM.L D0/A1,-(A7)
00001A14  0C79 00FA 00002C2A      1458              CMP.W   #GOLMAXGN,(GRDNGEN)
00001A1C  6D00 00C4               1459              BLT     .DOIT
00001A20  43F9 00001B02           1460              LEA     .TIE,A1
00001A26  3039 00002C26           1461              MOVE.W  (GRDNPLR1),D0
00001A2C  B079 00002C28           1462              CMP.W   (GRDNPLR2),D0
00001A32  6700 00A2               1463              BEQ     .PLAYSOUND
00001A36  43F9 00001AEC           1464              LEA     .P1WINS,A1
00001A3C  6E00 0098               1465              BGT     .PLAYSOUND
00001A40  43F9 00001AF7           1466              LEA     .P2WINS,A1
Line 1467 ERROR: Symbol value differs between first and second pass
00001A46                          1467  .PLAYSOUND  MOVE.B  #70,D0
00001A46  4E4F                    1468              TRAP    #15
Line 1469 ERROR: Symbol value differs between first and second pass
00001A48                          1469  .NOSOUND    JSR     GOLTOPAU
Line 1470 ERROR: Symbol value differs between first and second pass
00001A48                          1470  .DOIT       JSR     GRDRUPD
00001A48  4CDF 0201               1471              MOVEM.L (A7)+,D0/A1
00001A4C  4E75                    1472              RTS
Line 1473 ERROR: Symbol value differs between first and second pass
00001A4E= 50 31 57 49 4E 53 ...   1473  .P1WINS     DC.B    'P1WINS.WAV',0
Line 1474 ERROR: Symbol value differs between first and second pass
00001A58= 50 32 57 49 4E 53 ...   1474  .P2WINS     DC.B    'P2WINS.WAV',0
Line 1475 ERROR: Symbol value differs between first and second pass
00001A62= 54 49 45 2E 57 41 56    1475  .TIE        DC.B    'TIE.WAV',0
00001A6A                          1476              DS.W    0
00001A6A                          1477  
00001A6A                          1478  ; -----------------------------------------------------------------------------
Line 1479 ERROR: Symbol value differs between first and second pass
00001A6A                          1479  GOLTORUN
00001A6A                          1480  ; SWITCHES TO RUN STATE
00001A6A                          1481  ; INPUT    : NONE
00001A6A                          1482  ; OUTPUT   : NONE
00001A6A                          1483  ; MODIFIES : NONE
00001A6A                          1484  ; -----------------------------------------------------------------------------
00001A6A  4279 00002C2A           1485              CLR.W   (GRDNGEN)               ; CLEAR GENERATIONS COUNT
00001A70  13FC 0001 00002C2C      1486              MOVE.B  #GOLSEXEC,(GOLSTATE)
00001A78  4E75                    1487              RTS
00001A7A                          1488  
00001A7A                          1489  ; -----------------------------------------------------------------------------
Line 1490 ERROR: Symbol value differs between first and second pass
00001A7A                          1490  GOLTOPAU
00001A7A                          1491  ; SWITCHES TO PAUSE STATE
00001A7A                          1492  ; INPUT    : NONE
00001A7A                          1493  ; OUTPUT   : NONE
00001A7A                          1494  ; MODIFIES : NONE
00001A7A                          1495  ; -----------------------------------------------------------------------------
00001A7A  13FC 0000 00002C2C      1496              MOVE.B  #GOLSPAUS,(GOLSTATE)
00001A82  4E75                    1497              RTS
00001A84                          1498  
00001A84                          1499  ; --- STATIC DATA -------------------------------------------------------------
00001A84                          1500  
00001A84                          1501  ; CLEAR BUTTON SDB
00001A84                          1502  
Line 1503 ERROR: Symbol value differs between first and second pass
00001A84=                         1503  GOLCLRBT    DC.W    BTLVEMRG                ; YTOP
00001A84= 000A                    1504              DC.W    0*(SCRWIDTH/4)+BTLHOMRG ; XLEFT
00001A86= 0028                    1505              DC.W    BTLVERSZ                ; HEIGHT
00001A88= 00B4                    1506              DC.W    SCRWIDTH/4-2*BTLHOMRG   ; WIDTH
00001A8A                          1507  ; TODO: PLACE THE CALLBACK HERE
00001A8A= 000013E0                1508              DC.L    GRDINIT                 ; CALLBACK(GRID.X68)
00001A8E= 43 4C 45 41 52 00       1509              DC.B    'CLEAR',0               ; TEXT
00001A94                          1510              DS.W    0
00001A94                          1511  
00001A94                          1512  ; RUN BUTTON SDB
00001A94                          1513  
Line 1514 ERROR: Symbol value differs between first and second pass
00001A94=                         1514  GOLRUNBT    DC.W    BTLVEMRG                ; YTOP
00001A94= 00D2                    1515              DC.W    1*(SCRWIDTH/4)+BTLHOMRG ; XLEFT
00001A96= 0028                    1516              DC.W    BTLVERSZ                ; HEIGHT
00001A98= 00B4                    1517              DC.W    SCRWIDTH/4-2*BTLHOMRG   ; WIDTH
00001A9A                          1518  ; TODO: PLACE THE CALLBACK HERE
00001A9A= 00001B0A                1519              DC.L    GOLTORUN                ; CALLBACK(GOL.X68)
00001A9E= 52 55 4E 00             1520              DC.B    'RUN',0                 ; TEXT
00001AA2                          1521              DS.W    0
00001AA2                          1522  
00001AA2                          1523  ; STOP BUTTON SDB
00001AA2                          1524  
Line 1525 ERROR: Symbol value differs between first and second pass
00001AA2=                         1525  GOLSTPBT    DC.W    BTLVEMRG                ; YTOP
00001AA2= 019A                    1526              DC.W    2*(SCRWIDTH/4)+BTLHOMRG ; XLEFT
00001AA4= 0028                    1527              DC.W    BTLVERSZ                ; HEIGHT
00001AA6= 00B4                    1528              DC.W    SCRWIDTH/4-2*BTLHOMRG   ; WIDTH
00001AA8                          1529  ; TODO: PLACE THE CALLBACK HERE
00001AA8= 00001B1A                1530              DC.L    GOLTOPAU                ; CALLBACK(GOL.X68)
00001AAC= 53 54 4F 50 00          1531              DC.B    'STOP',0                ; TEXT
00001AB2                          1532              DS.W    0
00001AB2                          1533  
00001AB2                          1534  ; STEP BUTTON SDB
00001AB2                          1535  
Line 1536 ERROR: Symbol value differs between first and second pass
00001AB2=                         1536  GOLSTEBT    DC.W    BTLVEMRG                ; YTOP
00001AB2= 0262                    1537              DC.W    3*(SCRWIDTH/4)+BTLHOMRG ; XLEFT
00001AB4= 0028                    1538              DC.W    BTLVERSZ                ; HEIGHT
00001AB6= 00B4                    1539              DC.W    SCRWIDTH/4-2*BTLHOMRG   ; WIDTH
00001AB8                          1540  ; TODO: PLACE THE CALLBACK HERE
00001AB8= 0000151A                1541              DC.L    GRDRUPD                 ; CALLBACK(GRID.X68)
00001ABC= 53 54 45 50 00          1542              DC.B    'STEP',0                ; TEXT
00001AC2                          1543              DS.W    0
00001AC2                          1544  
00001AC2                          1545  ; LOAD LEFT BUTTON SDB
00001AC2                          1546  
Line 1547 ERROR: Symbol value differs between first and second pass
00001AC2=                         1547  GOLLLFBT    DC.W    2*BTLVEMRG+BTLVERSZ     ; YTOP
00001AC2= 000A                    1548              DC.W    0*(SCRWIDTH/4)+BTLHOMRG ; XLEFT
00001AC4= 0028                    1549              DC.W    BTLVERSZ                ; HEIGHT
00001AC6= 00B4                    1550              DC.W    SCRWIDTH/4-2*BTLHOMRG   ; WIDTH
00001AC8                          1551  ; TODO: PLACE THE CALLBACK HERE
00001AC8= 00001670                1552              DC.L    GRDLLEFT                ; CALLBACK(GRID.X68)
00001ACC= 4C 4F 41 44 20 4C ...   1553              DC.B    'LOAD LEFT',0           ; TEXT
00001AD6                          1554              DS.W    0
00001AD6                          1555  
00001AD6                          1556  ; LOAD RIGHT BUTTON SDB
00001AD6                          1557  
Line 1558 ERROR: Symbol value differs between first and second pass
00001AD6=                         1558  GOLLRTBT    DC.W    2*BTLVEMRG+BTLVERSZ     ; YTOP
00001AD6= 00D2                    1559              DC.W    1*(SCRWIDTH/4)+BTLHOMRG ; XLEFT
00001AD8= 0028                    1560              DC.W    BTLVERSZ                ; HEIGHT
00001ADA= 00B4                    1561              DC.W    SCRWIDTH/4-2*BTLHOMRG   ; WIDTH
00001ADC                          1562  ; TODO: PLACE THE CALLBACK HERE
00001ADC= 0000171C                1563              DC.L    GRDLRGT                 ; CALLBACK(GRID.X68)
00001AE0= 4C 4F 41 44 20 52 ...   1564              DC.B    'LOAD RIGHT',0          ; TEXT
00001AEC                          1565              DS.W    0
00001AEC                          1566  
00001AEC                          1567  ; LOAD ALL BUTTON SDB
00001AEC                          1568  
Line 1569 ERROR: Symbol value differs between first and second pass
00001AEC=                         1569  GOLLOABT    DC.W    2*BTLVEMRG+BTLVERSZ     ; YTOP
00001AEC= 019A                    1570              DC.W    2*(SCRWIDTH/4)+BTLHOMRG ; XLEFT
00001AEE= 0028                    1571              DC.W    BTLVERSZ                ; HEIGHT
00001AF0= 00B4                    1572              DC.W    SCRWIDTH/4-2*BTLHOMRG   ; WIDTH
00001AF2                          1573  ; TODO: PLACE THE CALLBACK HERE
00001AF2= 000015D0                1574              DC.L    GRDLOAD                 ; CALLBACK(GRID.X68)
00001AF6= 4C 4F 41 44 20 41 ...   1575              DC.B    'LOAD ALL',0            ; TEXT
00001B00                          1576              DS.W    0
00001B00                          1577  
00001B00                          1578  ; SAVE BUTTON SDB
00001B00                          1579  
Line 1580 ERROR: Symbol value differs between first and second pass
00001B00=                         1580  GOLSAVBT    DC.W    2*BTLVEMRG+BTLVERSZ     ; YTOP
00001B00= 0262                    1581              DC.W    3*(SCRWIDTH/4)+BTLHOMRG ; XLEFT
00001B02= 0028                    1582              DC.W    BTLVERSZ                ; HEIGHT
00001B04= 00B4                    1583              DC.W    SCRWIDTH/4-2*BTLHOMRG   ; WIDTH
00001B06                          1584  ; TODO: PLACE THE CALLBACK HERE
00001B06= 00001524                1585              DC.L    GRDSAVE                 ; CALLBACK (GRID.X68)
00001B0A= 53 41 56 45 00          1586              DC.B    'SAVE',0                ; TEXT
00001B10                          1587              DS.W    0
00001B10                          1588  
00001B10                          1589  -------------------- end include --------------------
00001B10                          1590  
00001B10                          1591  ; --- INITIALIZE --------------------------------------------------------------
00001B10                          1592  
Line 1593 ERROR: Symbol value differs between first and second pass
00001B10                          1593  START       JSR     SYSINIT                 ; INITIALIZE SYSTEM CODE
00001B10  4EB8 1A12               1594              JSR     GOLINIT                 ; INITIALIZE GAME OF LIFE
00001B14                          1595  
00001B14                          1596  ; --- UPDATE ------------------------------------------------------------------
00001B14                          1597  
Line 1598 ERROR: Symbol value differs between first and second pass
00001B14                          1598  .LOOP       TRAP    #MOUTRAP                ; READ MOUSE
00001B14  4EB8 1A6C               1599              JSR     GOLUPD                  ; UPDATE APPLICATION
00001B18                          1600  
00001B18                          1601  ; --- PLOT --------------------------------------------------------------------
00001B18                          1602  
00001B18  4EB8 1A98               1603              JSR     GOLPLOT                 ; PLOT APPLICATION
00001B1C  4E40                    1604              TRAP    #SCRTRAP                ; SHOW GRAPHICS
00001B1E  6000 00A8               1605              BRA     .LOOP
00001B22  FFFF FFFF               1606              SIMHALT
00001B26                          1607  
00001B26                          1608  ; --- VARIABLES ---------------------------------------------------------------
00001B26                          1609  
00001B26                          1610              INCLUDE "SYSVAR.X68"            ; SYSTEM VARIABLES
00001B26                          1611  ; =============================================================================
00001B26                          1612  ; TITLE    : SYSTEM VARS
00001B26                          1613  ; AUTHOR   : ANTONI BURGUERA
00001B26                          1614  ; HISTORY  : 05-JULY-2021 - CREATION
00001B26                          1615  ; COMMENTS : * ALL THESE VARS ARE USED TO SHARE DATA FROM SYSTEM TO USER. THUS
00001B26                          1616  ;              THEY MUST NOT BE IN PROTECTED MEMORY.
00001B26                          1617  ;
00001B26                          1618  ;            * SINCE SOME SUBROUTINES TAKE ADVANTAGE OF THE ORDER IN WHICH
00001B26                          1619  ;              THE VARIABLES ARE IN MEMORY, THEIR ORDER SHOULD NOT BE ALTERED.
00001B26                          1620  ; =============================================================================
00001B26                          1621  
00001B26                          1622  ; --- MOUSE RELATED VARIABLES -------------------------------------------------
00001B26                          1623  
Line 1624 ERROR: Symbol value differs between first and second pass
00001B26                          1624  MOUY        DS.W    1                       ; MOUSE Y COORDINATE
Line 1625 ERROR: Symbol value differs between first and second pass
00001B26                          1625  MOUX        DS.W    1                       ; MOUSE X COORDINATE
Line 1626 ERROR: Symbol value differs between first and second pass
00001B26                          1626  MOUVAL      DS.B    1                       ; CURRENT MOUSE BUTTON STATUS
Line 1627 ERROR: Symbol value differs between first and second pass
00001B26                          1627  MOUEDGE     DS.B    1                       ; RISING EDGES IN MOUVAL
00001B26                          1628              DS.W    0
00001B26                          1629  -------------------- end include --------------------
00001B26                          1630              INCLUDE "VAR.X68"               ; USER VARIABLES
00001B26                          1631  ; =============================================================================
00001B26                          1632  ; TITLE    : USER VARS
00001B26                          1633  ; AUTHOR   : ANTONI BURGUERA
00001B26                          1634  ; HISTORY  : 05-JULY-2021 - CREATION
00001B26                          1635  ; COMMENTS : SEE THE CORRESPONDING FILES (UTIL.X68, BTNLIST.X68, GRID.X68 OR
00001B26                          1636  ;            GOL.X68) TO LEARN ABOUT THE MEANING OF THESE VARIABLES.
00001B26                          1637  ; =============================================================================
00001B26                          1638  
00001B26                          1639  ; --- UTILITY VARS ------------------------------------------------------------
00001B26                          1640  
Line 1641 ERROR: Symbol value differs between first and second pass
00001B26                          1641  UTLRNDIX    DS.B    1                       ; RANDOM GENERATOR INDEX
00001B26                          1642              DS.W    0
00001B26                          1643  
00001B26                          1644  ; --- BUTTON LIST -------------------------------------------------------------
00001B26                          1645  
Line 1646 ERROR: Symbol value differs between first and second pass
00001B26                          1646  BTLDATA     DS.B    BTLMXVDB*BTNSZVDB       ; BUTTONS VDB STORAGE
00001B26                          1647              DS.W    0
00001B26                          1648  
00001B26                          1649  ; --- GRID --------------------------------------------------------------------
00001B26                          1650  
Line 1651 ERROR: Symbol value differs between first and second pass
00001B26                          1651  GRDSRC      DS.L    1                       ; SOURCE MATRIX POINTER
Line 1652 ERROR: Symbol value differs between first and second pass
00001B26                          1652  GRDDST      DS.L    1                       ; DESTINATION MATRIX POINTER
Line 1653 ERROR: Symbol value differs between first and second pass
00001B26                          1653  GRDMATR0    DS.B    GRDWIDTH*GRDHEIGH       ; ONE OF THE GRIDS...
Line 1654 ERROR: Symbol value differs between first and second pass
00001B26                          1654  GRDMATR1    DS.B    GRDWIDTH*GRDHEIGH       ; THE OTHER GRID
Line 1655 ERROR: Symbol value differs between first and second pass
00001B26                          1655  GRDNPLR1    DS.W    1                       ; NUMBER OF PLAYER 1 CELLS
Line 1656 ERROR: Symbol value differs between first and second pass
00001B26                          1656  GRDNPLR2    DS.W    1                       ; NUMBER OF PLAYER 2 CELLS
Line 1657 ERROR: Symbol value differs between first and second pass
00001B26                          1657  GRDNGEN     DS.W    1                       ; NUMOER OF GENERATIONS
00001B26                          1658  
00001B26                          1659  ; --- APPLICATION -------------------------------------------------------------
00001B26                          1660  
Line 1661 ERROR: Symbol value differs between first and second pass
00001B26                          1661  GOLSTATE    DS.B    1                       ; APPLICATION STATE
00001B26                          1662              DS.W    0
00001B26                          1663  -------------------- end include --------------------
00001B26                          1664  
00001B26                          1665              END    START

92 errors detected
No warnings generated


SYMBOL TABLE INFORMATION
Symbol-name         Value
-------------------------
BTLADD              1366
BTLADD:END          1384
BTLADD:FOUND        138A
BTLADD:LOOP         1374
BTLCLEAR            1346
BTLDATA             1BE2
BTLHOMRG            A
BTLINIT             1346
BTLINIT:LOOP        1354
BTLMXVDB            A
BTLPLOT             13B8
BTLPLOT:DONE        13DA
BTLPLOT:LOOP        13C6
BTLUPD              1390
BTLUPD:DONE         13B2
BTLUPD:LOOP         139E
BTLVEMRG            A
BTLVERSZ            28
BTNINIT             1208
BTNPENCL            5500
BTNPENWD            4
BTNPLOT             1290
BTNPLOT:DONE        1322
BTNPLOT:LOOP        1314
BTNPLOT:MOUPRESD    12C6
BTNPLOT:MOUSEOUT    12D0
BTNPLOT:SALIR       12D2
BTNPRSCL            6600
BTNSELCL            AA00
BTNSZVDB            6
BTNUPD              1218
BTNUPD:END          128A
BTNUPD:MOUSEOUT     1286
CHRHEIGH            10
CHRSHHEI            4
CHRSHWID            3
CHRWIDTH            8
CLRBLACK            0
CLRDKGRN            5500
CLRLTBLU            FF0000
CLRLTGRN            AA00
CLRLTRED            FF
CLRMDGRN            6600
CLRWHITE            FFFFFF
GOLCLRBT            1B24
GOLDORUN            1AA0
GOLDORUN:DOIT       1AE2
GOLDORUN:NOSOUND    1ADC
GOLDORUN:P1WINS     1AEC
GOLDORUN:P2WINS     1AF7
GOLDORUN:PLAYSOUND  1AD6
GOLDORUN:TIE        1B02
GOLINIT             1A12
GOLINIT:END         1A3A
GOLINIT:LOOP        1A28
GOLINIT:SDBLIST     1A48
GOLLLFBT            1B6A
GOLLOABT            1B98
GOLLRTBT            1B80
GOLMAXGN            FA
GOLPLOT             1A98
GOLRUNBT            1B36
GOLSAVBT            1BAE
GOLSEXEC            1
GOLSPAUS            0
GOLSTATE            2C2C
GOLSTEBT            1B58
GOLSTPBT            1B46
GOLTOPAU            1B1A
GOLTORUN            1B0A
GOLUPD              1A6C
GOLUPD:JMPTBL       1A90
GRDCOLP1            FF0000
GRDCOLP2            FF
GRDDST              1C22
GRDHEIGH            20
GRDINIT             13E0
GRDINIT:LOOP        1414
GRDLLEFT            1670
GRDLLEFT:COPY       16CC
GRDLLEFT:END        16F0
GRDLLEFT:FILTER     1716
GRDLLEFT:LOOP       16BA
GRDLLEFT:MSG        16FC
GRDLLEFT:STORE      16DE
GRDLOAD             15D0
GRDLOAD:COPY        162C
GRDLOAD:END         1644
GRDLOAD:FILTER      166A
GRDLOAD:LOOP        161A
GRDLOAD:MSG         1650
GRDLRGT             171C
GRDLRGT:COPY        177E
GRDLRGT:END         17A2
GRDLRGT:FILTER      17C8
GRDLRGT:LOOP        1766
GRDLRGT:MSG         17AE
GRDLRGT:STORE       1790
GRDMATR0            1C26
GRDMATR1            2426
GRDMSHEI            1F
GRDMSWID            3F
GRDMUPD             1420
GRDMUPD:CALP1P2     14A6
GRDMUPD:CLICKDER    1496
GRDMUPD:CLRCELL     14E4
GRDMUPD:CLRP2       14FE
GRDMUPD:FINN        1514
GRDMUPD:PLAYER1     14B0
GRDMUPD:PLAYER2     14CA
GRDMUPD:SETZERO     150E
GRDNGEN             2C2A
GRDNPLR1            2C26
GRDNPLR2            2C28
GRDPLOT             17CE
GRDPXHEI            180
GRDPXWID            300
GRDRUPD             151A
GRDSAVE             1524
GRDSAVE:END         15A4
GRDSAVE:FILTER      15CA
GRDSAVE:LOOP        1572
GRDSAVE:LOOPY       156E
GRDSAVE:MSG         15B0
GRDSCNGX            30
GRDSCNGY            9
GRDSCP1X            2
GRDSCP1Y            9
GRDSCP2X            5E
GRDSCP2Y            9
GRDSHHEI            5
GRDSHWID            6
GRDSRC              1C1E
GRDSZCEL            C
GRDVEMRG            6E
GRDWIDTH            40
GRDXOFF             10
GRDYOFF             9E
MOUBITLF            0
MOUBITMD            2
MOUBITRT            1
MOUEDGE             1BDF
MOUINIT             1020
MOUMSKLF            1
MOUMSKMD            4
MOUMSKRT            2
MOUREAD             1054
MOUTRAP             1
MOUVAL              1BDE
MOUX                1BDC
MOUY                1BDA
PRINTCHAR           258
PRINTCHAR:CLMS      17FC
PRINTCHAR:EQUALS    18D6
PRINTCHAR:EXIT      192A
PRINTCHAR:FINFOR1   1878
PRINTCHAR:FINFOR2   1872
PRINTCHAR:LNHRZNTL  1A00
PRINTCHAR:LNVRTCL   19E2
PRINTCHAR:P1        182C
PRINTCHAR:P2MRSCR   18B2
PRINTCHAR:PAINT     1844
PRINTCHAR:ROWS      17F0
PRINTCHAR:VACIA     183A
SCRHEIGH            258
SCRINIT             107E
SCRTRAP             0
SCRUPD              10B6
SCRWIDTH            320
SETCURSOR           0
SETFLLCLR           C5
SETNUMBER           152
SETPENCLR           1DD
START               1BC0
START:LOOP          1BC8
SYSINIT             1000
UTLINIT             10D0
UTLRAND             10EA
UTLRAND:RANDVEC     1108
UTLRNDIX            1BE0
UTLSTRLN            10D8
UTLSTRLN:END        10E6
UTLSTRLN:LOOP       10DC
